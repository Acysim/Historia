(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-378ec930"],{"03b9":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return i}));var a=n("99b1"),o=n("e443");const r=window.projectConfig;t["a"]={getiframeUrl(){return a["a"].oc.userpicker},getOcHost(){return r.host.oc},getOcPickerJs(){return a["a"].oc.ocPickerJs}};const s=(e,t=0)=>Object(o["b"])({url:a["a"].oc.smsCode,method:"post",params:{mobile:e,verificationCodeType:t}}),i=(e,t)=>Object(o["b"])({url:a["a"].oc.validateCode,method:"post",params:{phone:e,code:t}})},"07e6":function(e,t,n){"use strict";n("14d9");var a=n("3bce");t["a"]={get target(){return iduo.refs["form-target"]},getData(){return this.target.data},setData(e){let t=this;null!==e&&(t.target.data=e)},setTopData(e){const t=iduo.refs["form-target"].$refs["iform-top"],n=t.templateData;t.templateData={...n,...e}},valid(e){let t=this,n=t.target.$store;const o=[],{formConfiguration:r,templateConfiguration:s}=this.target.configuration;function i(e,t=[]){return e.forEach(e=>{if(Object(a["r"])(e,["component","group"]))i(e.items,t);else if(Object(a["r"])(e,["detail"])){let e=iduo.refs["form-target"].$store.getters.grids;e.forEach(e=>{void 0!==e.editIndex&&null!==e.editIndex&&i(e.configuration.items,t)})}else e.code&&t.push(e.code)}),t}null!==r&&void 0!==r&&r.formItems&&o.push(...r.formItems),null!==s&&void 0!==s&&s.formItems&&o.push(...s.formItems);const c=i(o);n.getters.validFieds(c,e)},structFormData(e){setTimeout(()=>{const t=iduo.refs["iform-form"];t.formData={...t.structData(),...e}},100)},refreshForm(){iduo.refs["form-target"].refresh()}}},"12cb":function(e,t,n){"use strict";var a=n("a026"),o=n("a925");function r(){const e=n("49f8"),t={};return e.keys().forEach(n=>{const a=n.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){const o=a[1];t[o]=e(n)}}),t}a["default"].use(o["a"]),t["a"]=new o["a"]({locale:"zh",fallbackLocale:"zh",messages:r(),silentTranslationWarn:!0})},"163b":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"p",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"q",(function(){return p})),n.d(t,"t",(function(){return f})),n.d(t,"r",(function(){return m})),n.d(t,"k",(function(){return g})),n.d(t,"e",(function(){return h})),n.d(t,"m",(function(){return _})),n.d(t,"g",(function(){return b})),n.d(t,"n",(function(){return y})),n.d(t,"d",(function(){return k})),n.d(t,"i",(function(){return w})),n.d(t,"h",(function(){return v})),n.d(t,"o",(function(){return O})),n.d(t,"f",(function(){return T})),n.d(t,"l",(function(){return I})),n.d(t,"s",(function(){return P})),n.d(t,"u",(function(){return A})),n.d(t,"a",(function(){return D}));n("d9e2"),n("14d9"),n("88a7"),n("271a"),n("5494");var a=n("365c"),o=n("f253"),r=n("e443");function s(e){return e}function i(e){return Number(e)}function c(e,t){if(void 0!==e){var n=e instanceof Array?i:s;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=e[a],r=t(o,n(a));if(!1===r)return}}}function u(){for(var e="",t=1;t<=32;t++){var n=Math.floor(16*Math.random()).toString(16);e+=n,8!==t&&12!==t&&16!==t&&20!==t||(e+="-")}return e}function l(e,t="fun_"){if(!e)return;const n="<<split>>",a="function";let o={};const r=e.trim().replace(/[\r\n]/g,"").replace(RegExp(a,"g"),n+a).split(n);return r.forEach(e=>{if(!e)return;const n=RegExp(t+"[0-9A-Za-z]{0,31}","g").exec(e).shift(),a=/(?:\/\*[\s\S]*?\*\/|\/\/.*?\r?\n|[^{])+\{([\s\S]*)\}$/.exec(e).pop();if(n)try{o[n]=new Function(a)}catch(r){return console.log("字符串处理成函数对象错误："),console.log("方法名：",n),console.log("方法体：",a),{}}}),o}function d(e=""){window.location.origin;return e.includes("http")}function p(e){e&&(w()?dd.biz.navigation.setTitle({title:e}):(document.title=e,Promise.resolve().then(()=>{const e=document.createElement("iframe");e.style.display="none",e.onload=()=>{Promise.resolve().then(()=>e.remove())},document.body.append(e)})))}function f(){sessionStorage.setItem("isFormSubmitAfterBack","true")}function m(){sessionStorage.removeItem("isFormSubmitAfterBack")}function g(){return!!sessionStorage.getItem("isFormSubmitAfterBack")}function h(e){switch(e){case 1:return"success";case 0:return"warning";case 9:return"danger";default:return"success"}}function _(){const e=navigator.userAgent.includes("iPhone"),t=navigator.userAgent.includes("iPad");return e||t}function b(){return navigator.userAgent.includes("Android")}function y(){return/Mobi|Android|iPhone/i.test(navigator.userAgent)}function k(){const{origin:e,pathname:t,search:n}=window.location;return e+t+n}function w(){return navigator.userAgent.toLocaleLowerCase().includes("dingtalk")}const v=w;function O(){return navigator.userAgent.toLocaleLowerCase().includes("micromessenger")}const T=e=>{const[t,n,a,o]=e;return"object"===typeof t?t:{validate:t,submitable:t,errorMsg:n,successMsg:o,onlyValid:!1,prompt:a}},C=/^(http|https):\/\//,I=e=>!!e&&C.test(e),P=(e,t=1)=>`${a["d"].GetFileBytePath()}?id=${e}&jsType=${t}&t=${Date.now()}`,S=o["h"]+"/api/appQuantity/add",E=["/app/api/App/GetUserAppViewAndMenu"];function A(e,t){E.includes(e)&&t.appId&&r["b"].post(S,t,r["b"].contentType.appJson)}const D=()=>{dd.closePage({success:()=>{},fail:()=>{},complete:()=>{}})}},2846:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},o=[],r=(n("be4f"),n("450d"),n("896a")),s=n.n(r),i=n("4a60"),c={name:"FullScreenLoading",data(){return{loading:null,events:{"iduo.form.loading":this.handleLoading,"iduo.form.endLoading":this.handleEndLoading}}},mounted(){Object(i["b"])(this.events)},destroyed(){Object(i["a"])(this.events)},methods:{handleLoading(e={}){this.loading=s.a.service(e),setTimeout(()=>{this.loading.close()},1e4)},handleEndLoading(){var e;null===(e=this.loading)||void 0===e||e.close()}}},u=c,l=n("2877"),d=Object(l["a"])(u,a,o,!1,null,null,null);t["a"]=d.exports},3504:function(e){e.exports=JSON.parse("{}")},"365c":function(e,t,n){"use strict";n.d(t,"e",(function(){return c["a"]})),n.d(t,"f",(function(){return u["a"]})),n.d(t,"b",(function(){return a["a"]})),n.d(t,"d",(function(){return i["f"]})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return _["a"]})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return b}));var a=n("b562"),o=n("e443"),r=n("99b1"),s={getAllUserExpands(){return o["b"].get(r["a"].orginzation.getAllUserExpands).then(e=>e.data)},register(e){return o["b"].post(r["a"].orginzation.register,e,o["b"].contentType.appJson).then(e=>e.data)},sendSmsCode(e){return o["b"].post(`${r["a"].orginzation.smsCode}?mobile=${e}`).then(e=>e.data)},passwordPolicy(){return o["b"].get(""+r["a"].orginzation.passwordPolicy).then(e=>e.data)},userRegisteredWithExternal(e){return o["b"].get(`${r["a"].orginzation.userRegisteredWithExternal}?externalKey=${e}`).then(e=>e.data)}},i=n("d3be"),c=n("e1b8"),u=n("03b9"),l=(n("9a83"),n("f564")),d=n("4360"),p=n("d702"),f=n("5a0c"),m=n.n(f);const g=window.projectConfig;var h={getTokenByUserAndPwd(e,t){var n=Object.assign(g.oauth,{username:e,password:t});return new Promise((e,t)=>{o["b"].post(g.authGetTokenUrl,n,o["b"].oauth.client(g.oauth)).then(t=>{e(t.data)}).catch(e=>{Object(l["a"])({type:"danger",message:"根据用户名密码获取Token出错！"}),t(e)})})},getUserInfo(e){return new Promise((t,n)=>{var a=e?{headers:o["b"].oauth.accessToken(e)}:null;o["b"].post(g.authGetUserInfoUrl,{},a).then(e=>{e.data.Error?n(e):t(e.data)}).catch(e=>{Object(l["a"])({type:"danger",message:"请求用户信息接口时出错"}),n(e)})})},signIn(e,t){return d["a"].dispatch("setUserInfo",e),new Promise((n,a)=>{t?this.getMenus(e).then(e=>{1===e.Code?(console.log("当前用户可访问的菜单权限：",e),n(e)):Object(l["a"])(0===e.Code?"warning":1===e.Code?"success":"error",e.Message)}):n(null)})},getMenus(e){var t=d["a"].state.configs.module;return console.log("根据module、roles获取权限集合：",t,e.UserRoleIds),new Promise((n,a)=>{var s="?module="+t+"&roles="+e.UserRoleIds;o["b"].get(r["a"].menu.getByRoles+s).then(e=>{n(e.data)}).catch(e=>{a(e)})})},saveToken(e){e.expires_time||(e.expires_time=m()().getTime()+1e3*e.expires_in,console.log("token的过期时间为",e.expires_time,m()(m()().getTime()+e.expires_in).toLocaleString())),d["a"].dispatch("setToken",e);var t=JSON.stringify(e),n=Object(p["b"])(t);localStorage.setItem("iduo.token",n)},signOut(){d["a"].dispatch("oidcStore/signOutOidc"),localStorage.clear(),console.log("正在请求auth服务器退出登录..."),window.location.reload()}},_=(n("cd12"),n("b199")),b={getOrUpdateMessage(e){return new Promise((t,n)=>{o["b"].post(r["a"].ai.getOrUpdateMessage,e,o["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})}}},"3bce":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"u",(function(){return parseRelationConfig})),__webpack_require__.d(__webpack_exports__,"m",(function(){return getRelationState})),__webpack_require__.d(__webpack_exports__,"p",(function(){return getStatusText})),__webpack_require__.d(__webpack_exports__,"l",(function(){return getInstanceStatus})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getInstanceColor})),__webpack_require__.d(__webpack_exports__,"o",(function(){return getStatus})),__webpack_require__.d(__webpack_exports__,"q",(function(){return getTaskSignStatus})),__webpack_require__.d(__webpack_exports__,"n",(function(){return getSignStatus})),__webpack_require__.d(__webpack_exports__,"s",(function(){return isUrging})),__webpack_require__.d(__webpack_exports__,"r",(function(){return isControlType})),__webpack_require__.d(__webpack_exports__,"e",(function(){return format})),__webpack_require__.d(__webpack_exports__,"f",(function(){return formatDateBox})),__webpack_require__.d(__webpack_exports__,"j",(function(){return generateRules})),__webpack_require__.d(__webpack_exports__,"i",(function(){return generateFormConfiguration})),__webpack_require__.d(__webpack_exports__,"g",(function(){return formatLoadBiz})),__webpack_require__.d(__webpack_exports__,"h",(function(){return formatSubmitBiz})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ExportExcel})),__webpack_require__.d(__webpack_exports__,"d",(function(){return convertToDate})),__webpack_require__.d(__webpack_exports__,"c",(function(){return applyNoGen})),__webpack_require__.d(__webpack_exports__,"t",(function(){return newBizId})),__webpack_require__.d(__webpack_exports__,"v",(function(){return randomString})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DownloadBlob}));var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("14d9"),core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_web_url_search_params_delete_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("88a7"),core_js_modules_web_url_search_params_delete_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_web_url_search_params_delete_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_web_url_search_params_has_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("271a"),core_js_modules_web_url_search_params_has_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_web_url_search_params_has_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_url_search_params_size_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5494"),core_js_modules_web_url_search_params_size_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_url_search_params_size_js__WEBPACK_IMPORTED_MODULE_3__),_components_iform_js_model_RuleAttribute__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("bf26"),_duo_common_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("8af2"),dayjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5a0c"),dayjs__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_6__),_Base__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("9837"),_relation__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("9f8c");function doCompatible(e){const t=["radio","relationFormItems"],n=["multiRelationComparisonType","relations"],a={1:_relation__WEBPACK_IMPORTED_MODULE_8__["a"].EVERY,2:_relation__WEBPACK_IMPORTED_MODULE_8__["a"].SOME},o=Object.keys(e),r=o.some(e=>t.includes(e))&&o.every(e=>!n.includes(e));if(r){const t=a[e.radio],n=e.relationFormItems;return n.forEach(e=>{const t=e.checkValue,n=Array.isArray(t),a="string"===typeof t;e.comparisonType=_relation__WEBPACK_IMPORTED_MODULE_8__["a"].SOME,a?e.checkValue=t.split(","):n||(e.checkValue=[])}),{multiRelationComparisonType:t,relations:n}}return e}const arrFullEqualArr=(e,t)=>{const n=Array.isArray;return!(!n(e)||!n(t))&&(e.length===t.length&&e.every(e=>t.includes(e)))},parseRelationConfig=e=>{var t;const{code:n}=e,a={relationConfig:null,isEmpty:!0,code:n};if(!e)return a;if(null===(t=e.extension)||void 0===t||!t.relationControl)return a;const{relationControl:o}=e.extension;let r;try{r=JSON.parse(o)}catch(i){return a}r=doCompatible(r);const s=!r.relations||0===r.relations.length;return{relationConfig:r,isEmpty:s,code:n}};function getRelationState(e,t={}){const{relationConfig:n,isEmpty:a}=parseRelationConfig(e);if(a)return!0;const{multiRelationComparisonType:o,relations:r}=n,s=o===_relation__WEBPACK_IMPORTED_MODULE_8__["a"].EVERY,i=({checkValue:e,comparisonType:n,selectValue:a})=>{const o=[null,"",void 0],r=a?t[a]:Object(_Base__WEBPACK_IMPORTED_MODULE_7__["g"])(a);if(o.includes(e))return!0;if(o.includes(r))return!1;const s=Array.isArray(r)?r:(r+"").split(",");return n===_relation__WEBPACK_IMPORTED_MODULE_8__["a"].SOME?e.some(e=>s.includes(e)):n===_relation__WEBPACK_IMPORTED_MODULE_8__["a"].EVERY?arrFullEqualArr(e,s):void 0};return s?r.every(i):r.some(i)}function getStatusText(e){let t="待审批";switch(e.status+""){case"3":0===e.subStatus?t="已完成":31===e.subStatus?t="退回":32===e.subStatus&&(t="失败");break;case"7":t="取消";break;default:break}return t}function getInstanceStatus(e){let t="审批中";switch(e){case"1":t="审批中";break;case"2":t="完成";break;case"4":t="被取消";break;case"7":t="异常停滞";break;default:break}return t}function getInstanceColor(e){let t="";switch(e){case"1":t="primary";break;case"2":t="success";break;case"4":t="danger";break;case"7":t="warning";break}return t}function getStatus(e){let t="inbox";if(e)switch(e.status.toString()){case"3":0===e.subStatus?t="complete":31===e.subStatus?t="return":32===e.subStatus&&(t="fail");break;case"7":t="abort";break;default:break}return t}function getTaskSignStatus(e){let t="sping";if(e)switch(e.status){case"3":0===e.subStatus?t="pass":31===e.subStatus?t="return":32===e.subStatus&&(t="abort");break;case"7":t="abort";break;default:break}return t}function getSignStatus(e){var t,n,a,o,r,s,i;let c="pass";return null!==(t=e.signText)&&void 0!==t&&t.includes("退回")||null!==(n=e.status)&&void 0!==n&&n.includes("return")?c="return":null!==(a=e.signText)&&void 0!==a&&a.includes("终止")||null!==(o=e.signText)&&void 0!==o&&o.includes("取消")||null!==(r=e.status)&&void 0!==r&&r.includes("abort")?c="abort":(null!==(s=e.signText)&&void 0!==s&&s.includes("审批中")||null!==(i=e.signText)&&void 0!==i&&i.includes("待审批"))&&(c="sping"),c}function isUrging(e){var t,n;return(null===(t=e.signText)||void 0===t?void 0:t.includes("审批中"))||(null===(n=e.signText)||void 0===n?void 0:n.includes("待审批"))}function isControlType(e,t){let n=[];n=t instanceof Array?t:[t];let a=e.controlType||e.control;return n.indexOf(a.toLocaleLowerCase())>-1}function format(e,t=""){const n=t?(t+"").split("."):[];let a;switch(e.controlType.toLowerCase()){case"datebox":a=formatDateBox(n[0],e.extension.dateFormat);break;case"cascader":a=formatCascader(t,e);break;case"combotree":a=formatCombotree(t,e);break;case"combobox":case"combogrid":a=formatComboData(t,e);break;case"radiobox":case"checkbox":a=formatRadioCheck(t,e);break;case"ocbox":a=formatOCData(t);break;case"filebox":a=formatAttachment(t,e);break;case"citypicker":a=formatCityPicker(t,e);break;case"switch":a=formatSwitch(t);break;case"htmledit":a=formatHtmlEdit(t);break;default:a=t;break}return e.code.toLowerCase().indexOf("date")>-1&&(a=formatDateBox(n[0],e.extension.dateFormat)),a}function formatHtmlEdit(e){return e?e.replace(/<p>/g,"").replace(/<\/p>/g,""):""}function formatSwitch(e){return"number"===typeof e?1===e:e}function formatCityPicker(e,t){return e}function formatAttachment(e,t){let n="";if(e){let t=JSON.parse(e);t.forEach(e=>{n+=e.name+";"})}return n}function formatDateBox(e,t){let n=e;if(isOrcaleDate(e)&&(e=convertToDate(e)),t||(t="datetime"),e)switch(t.toLowerCase()){case"date":n=dayjs__WEBPACK_IMPORTED_MODULE_6___default()(e).format("YYYY-MM-DD");break;case"datetime":n=dayjs__WEBPACK_IMPORTED_MODULE_6___default()(e).format("YYYY-MM-DD HH:mm:ss");break;case"month":case"year-month":n=dayjs__WEBPACK_IMPORTED_MODULE_6___default()(e).format("YYYY-MM");break;case"time":case"timer":const t=dayjs__WEBPACK_IMPORTED_MODULE_6___default()(e);n=t.isValid()?t.format("HH:mm:ss"):e;break;default:break}return n}function formatCascader(e,t){null===e&&(e="");let n=t.extension.resource||t.dataSource||[];if("string"===typeof n&&n.indexOf("[")>-1&&(n=JSON.parse(n)),0===n.length||n.indexOf("$")>-1)return e;function a(e,t,n){t.forEach(t=>{if(e===t.value)return n.push(t.label),"";t.children&&a(e,t.children,n)})}let o=[];return n[0]instanceof Array?a(e,n[0],o):a(e,n,o),o.join("/")}function formatCombotree(e,t){let n="";null===e&&(e="");let a=t.extension.resource||t.dataSource||[];if("string"===typeof a&&a.indexOf("[")>-1&&(a=JSON.parse(a)),0===a.length||a.indexOf("$")>-1)return e;function o(e,t){t instanceof Array&&t.forEach(t=>{e===t.value?n=t.label:t.children&&o(e,t.children)})}return a[0]instanceof Array?o(e,a[0],n):o(e,a,n),n}function formatComboData(e,t){return getValueByConfiguration(e,t)||e}function formatRadioCheck(e,t){return getValueByConfiguration(e,t)||e}function getValueByConfiguration(e,t){if(null==e)return"";const[n,a]=[t.extension.resource,t.dataSource];let o=n||a||[];try{"string"===typeof o&&o.indexOf("[")>-1&&(o=JSON.parse(o))}catch(i){o=[]}if(0===o.length)return e;const r=e.split(",");if(!Array.isArray(o))return e;const s=r.map(e=>{if(o.find){const t=o.find(t=>t.value===e);return t||{label:e}}return{label:e}}).map(e=>e.label);return s.join(",")||e}function formatOCData(e=""){try{const t=JSON.parse(e);if(!Array.isArray(t))throw"users is not a Array!";return t.map(e=>e.name).join(",")}catch(t){return e}}function generateRules(e){let t={};return e.forEach(e=>{e.code=e.code&&e.code.replace(".","-");let n=Object(_components_iform_js_model_RuleAttribute__WEBPACK_IMPORTED_MODULE_4__["c"])(e);n&&Object.assign(t,n)}),t}function generateFormConfiguration(e){let t=[],n=Object.assign({},e);for(var a=0;a<n.formConfiguration.formItems.length;a++){let e=n.formConfiguration.formItems[a];if(e.code&&(e.code=e.code&&e.code.replace(/\./g,"-")),"detail"===e.controlType)for(var o=0;o<e.items.length;o++){let n=e.items[o];n.code=n.code&&n.code.replace(/\./g,"-"),"filebox"===n.controlType&&t.push(n)}if("component"===e.controlType)for(var r=0;r<e.items.length;r++){let t=e.items[r];t.code=t.code&&t.code.replace(/\./g,"-");let a,o=e.extension.dataModelId;for(var s=0;s<n.formConfiguration.dataModels.length;s++){let e=n.formConfiguration.dataModels[s];if(e.id===o){a=e;break}}a&&(t.code=a.code+"-"+t.code)}"filebox"===e.controlType&&t.push(e),e.items.length&&e.items.forEach(e=>{"filebox"===e.controlType&&t.push(e)})}return t}function formatLoadBiz(e){let t={},n=Object.keys(e);return n.forEach(n=>{let a=e[n];if(a instanceof Array){t[n]=[];for(var o=0;o<a.length;o++){let e={__templateMode:!0},r=a[o],s=Object.keys(r);s.forEach(t=>{e[t.replace(/\./g,"-")]=r[t]}),void 0!==r["__ROWINDEX"]&&null!==r["__ROWINDEX"]||(e["__ROWINDEX"]=o),t[n].push(e)}}else t[n.replace(/\./g,"-")]=e[n]}),t}const covertItemData=e=>(Object.entries(e).forEach(([t,n])=>{const a=t.replace(/-/g,".");let o=n;n instanceof Date&&(o=dayjs__WEBPACK_IMPORTED_MODULE_6___default()(n).format("YYYY-MM-DD HH:mm:ss")),e[a]=o}),{...e});function formatSubmitBiz(e,t,n,a){const o=covertItemData(e);return n.forEach(e=>{const t=e.handleChanges(),n=e.code.replace(/-/g,".");o[n]=t.map(e=>covertItemData(e))}),o}function getFormItem(e,t){for(var n=0;n<t.length;n++){let a=t[n];if(a.code===e)return a;if(a.items.length){let t=getFormItem(e,a.items);if(t)return t}}return null}function ExportExcel(e,t,n,a,o,r){}function Equal(e,t){let n=!0,a=Object.keys(e),o=Object.keys(t);return a.length===o.length?a.forEach(a=>{e[a]!==t[a]&&(n=!1)}):n=!1,n}function DataRowEqual(e,t){let n=!0,a=Object.keys(e);return a.forEach(a=>{void 0!==e[a]&&null!==e[a]&&null!==t[a]&&void 0!==t[a]&&e[a]!==t[a]&&"__ROWINDEX"!==a&&"ROWINDEX"!==a&&"attachmentUrl"!==a&&(n=!1)}),n}function isOrcaleDate(e){return!(e instanceof Date)&&(null!==e&&void 0!==e&&((e.toString().indexOf("AM")>-1||e.toString().indexOf("PM")>-1)&&e.toString().indexOf(":")>-1&&/\s/g.test(e.toString())))}function convertToDate(e){let t="";if(e&&isOrcaleDate(e)){let n,a,o,r,s,i=e.indexOf("PM")>-1,c=[];e.replace(/\s/g,",").replace(/:/g,",").replace(/AM/g,"").replace(/PM/g,"").split(",").forEach(e=>{""!==e&&c.push(e)}),c.length&&(n=c[2],a=c[0],o=c[1],r=i?(parseInt(c[3])+12).toString():c[3],s=c[4],t=dayjs__WEBPACK_IMPORTED_MODULE_6___default()(n+"-"+a+"-"+o+" "+r+":"+s).format("YYYY-MM-DD HH:mm:ss"))}else t=dayjs__WEBPACK_IMPORTED_MODULE_6___default()(e).format("YYYY-MM-DD HH:mm:ss");return t}function applyNoGen(e){if(!e)return newBizId();const{placeholderList:t,replaceRegExp:n}=Object(_duo_common_core__WEBPACK_IMPORTED_MODULE_5__["b"])(e);return t.forEach(t=>{if(t.includes("uuid"))e=e.replace(t,randomString(6).toUpperCase());else{const a=t.replace(n,"");e=e.replace(t,dayjs__WEBPACK_IMPORTED_MODULE_6___default()().format(a))}}),t.some(e=>e.includes("uuid"))||(e+=randomString(6).toUpperCase()),e}function newBizId(){return dayjs__WEBPACK_IMPORTED_MODULE_6___default()().format("YYYYMMDDHHmmss")+randomString(6).toUpperCase()}function randomString(e){let t=getUUid(),n="",a=t.length;for(let o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*a));return n}function getUUid(e,t){e=e?e.toLowerCase():"n",t=!t||isNaN(t)?32:t,(t>32||0===t)&&(t=32),t<-32&&(t=-32);for(var n="",a=1;a<=32;a++)n+=Math.floor(16*Math.random()).toString(16),8!==a&&12!==a&&16!==a&&20!==a||(n+="-");switch(e){case"n":n=n.replace(/-/g,"");break;case"b":n="{"+n+"}";break;case"p":n="("+n+")";break;case"d":default:break}return n.substr(0,t)}function getRelationState_old(config){if(config){let relation=config.extension.relationControl;if(relation){let state=!1;relation=JSON.parse(relation);let relationship=1===relation.radio?"&&":"||",relationFormItems=relation.relationFormItems,scripts="",fileds=[],arrays=[],filter=[];return relationFormItems.forEach(e=>{let t=Object(_Base__WEBPACK_IMPORTED_MODULE_7__["g"])(e.code);if(null!==t&&void 0!==t&&"string"===typeof t&&(t.indexOf(",")>-1||t instanceof Array))fileds.push(`let ${e.code}_valueArray=${JSON.stringify(t.indexOf(",")>-1?t.split(","):t)};`),arrays.push(`let ${e.code}_array=${JSON.stringify(e.checkValue)}; let ${e.code}_state = false;`),arrays.push(`for (var i = 0; i < ${e.code}_valueArray.length;i++) { let itemValue=${e.code}_valueArray[i]; if (${e.code}_array.indexOf(itemValue) > -1) { ${e.code}_state= true } }`),filter.push(` ${e.code}_state`);else{switch(typeof t){case"number":fileds.push(`let ${e.code}_value=${t};`);break;default:fileds.push(`let ${e.code}_value='${t}';`);break}arrays.push(`let ${e.code}_array=${JSON.stringify(e.checkValue)};`),filter.push(`${e.code}_array.indexOf(${e.code}_value) > -1`)}}),fileds.length&&arrays.length?(scripts+=`${fileds.join("")} ${arrays.join("")} if (${filter.join(relationship)}) { state = true }`,eval(scripts)):state=!1,state}}return!0}function DownloadBlob(e,t){if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(e,decodeURI(t));else{const n=window.URL.createObjectURL(e),a=document.createElement("a");a.style.display="none",a.href=n,a.setAttribute("download",decodeURI(t)),"undefined"===typeof a.download&&a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)}}},"3d1f":function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n("4360"),o=n("8af2");const{seqConfig:r,hosts:s}=window.projectConfig,[i,c]=[(null===r||void 0===r?void 0:r.url)||s.gateway+"/seq",null===r||void 0===r?void 0:r.apiKey];function u(){!0===r.enable&&Object(o["c"])({url:i,apiKey:c,iisSiteName:"iduo-form-mobile"})}const l=()=>({location:location.href,user:{...a["a"].state.userInfo,...a["a"].getters["oidcStore/oidcUser"]},navigator:{userAgent:navigator.userAgent,userAgentData:navigator.userAgentData},__APP_INFO__:window.__APP_INFO__})},"3e90":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("a026");const o="__v_isRef";function r(e){return!(!e||!0!==e.__v_isRef)}function s(e,t,n,a){Object.defineProperty(e,t,{value:n,enumerable:!!a,writable:!0,configurable:!0})}const i=e=>r(e)?e:(s(i,o,!0),a["default"].observable({value:e}))},"428f":function(e,t,n){},4360:function(e,t,n){"use strict";var a=n("a026"),o=n("2f62");n("14d9");const r="SET_CONFIG",s="SET_TOKEN",i="SET_USERINFO",c="SET_FORMRESOURCE",u="SET_BIZ",l="SET_CONF",d="SET_GRID",p="SET_MODEL",f="SET_DISABLED",m="SET_HIDESIGN",g="SET_TASKINFO",h="SET_DIRNAME",_="SET_SYSTEM",b="SET_CONFIGURATION",y="APPEND_VALIDREF",k="REMOVE_VALIDREF",w="DISABLE_FORM_ITEM_CHECK",v="SET_OPERATIONApp";var O={setConfigs({commit:e},t){e(r,t)},setToken({commit:e},t){e(s,t)},setUserInfo({commit:e},t){e(i,t)},setBiz({commit:e},t){e(u,t)},setConf({commit:e},t){e(l,t)},setModel({commit:e},t){e(p,t)},setFormResource({commit:e},t){e(c,t)},addGrid({commit:e,state:t},n){let a=!1,o=t.grids.concat([]);o.forEach(e=>{e.code===n.code&&(a=!0)}),a||o.push(n),e(d,o)},clearGrid({commit:e,state:t}){e(d,[])},setDisabled({commit:e},t){e(f,t)},setHideSign({commit:e},t){e(m,t)},setTaskInfo({commit:e},t){e(g,t)},setDirName({commit:e},t){e(h,t)},setSystem({commit:e},t){e(_,t)},setFormConfiguration({commit:e},t){e(b,t)},appendValidRef({commit:e},t){e(y,t)},removeValidRef({commit:e},t){e(k,t)},disableFormItemCheck({commit:e},{codes:t,bool:n}){e(w,{codes:t,bool:n})},operationApp({commit:e},t){e(v,t)}},T=(n("d9e2"),n("79fa"));const C=e=>{const t=e=>e?{...e,DepartmentName:I()&&e.DepartmentEnName||e.DepartmentName}:{};return Array.isArray(e)?e.map(t):[e].map(t)},I=()=>"en"===T["a"].getCurrentLang();var P={validRefs:e=>e.validRefs,configs:e=>e.configs,userInfo:({userInfo:e})=>{const t=I()&&(null===e||void 0===e?void 0:e.UserEnName)||(null===e||void 0===e?void 0:e.UserName);return{...e,UserName:t,Jobs:C(null===e||void 0===e?void 0:e.Jobs)}},tokenInfo:e=>e.token,resource:e=>e.resource,getResourceByCode:e=>t=>(t=t&&t.replace("-","."),e.resource[t]||[]),processName:e=>null!==e.taskInfo?e.taskInfo.processName:e.dirName,stepName:e=>null!==e?e.taskInfo.stepName:"",stepId:e=>null!==e?e.taskInfo.stepId:"",assist:e=>e.model.assist,grids:e=>e.grids,platform:e=>()=>{var e=window.navigator.userAgent.toLowerCase();return e.indexOf("micromessenger")>-1||e.indexOf(!1)?"Weixin":e.indexOf("dingtalk")>-1?"DingTalk":"mobile"},data:e=>(t,n,a,o,r)=>{let s={userId:e.userInfo.UserAccount,userName:e.userInfo.UserName,domain:e.userInfo.Domain};function i(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("micromessenger")>-1||e.indexOf(!1)?"Weixin":e.indexOf("dingtalk")>-1?"DingTalk":"mobile"}let c={bizId:t,platform:i(),IsDraft:!1,IsDeleteDraft:!1},u=Object.assign(e.data,{biz:n,user:s,task:a,form:r,sign:o,conf:c});return u},isAdministrator:e=>{let t=!1;return e.userInfo.UserRoles instanceof Array?e.userInfo.UserRoles.forEach(e=>{e.Name.indexOf("CONFIG_SYSADMIN")>-1&&(t=!0)}):e.userInfo.UserRoles.Name.forEach(e=>{e.indexOf("CONFIG_SYSADMIN")>-1&&(t=!0)}),t},disabled:e=>e.disabled,hideSign:e=>e.hideSign,taskInfo:e=>e.taskInfo,dirName:e=>e.dirName,system:e=>e.system,formConfiguration:e=>e.formConfiguration,getSystem:e=>t=>e.system?e.system.find(t):"",validFieds:e=>(t,n)=>{let a=[];if(t){let n=e.validRefs;const o=e.checkMap;if(t=t instanceof Array?t:[t],t.length)for(let e=0;e<t.length;e++){let r=t[e],s=n[r];const i=o[r];if(s){if(null===i||void 0===i||!i.disableCheck)continue;let e=s.handleValid("blur");e instanceof Error?(a.push(e),s.handleCallback(e)):(e=s.handleValid("change"),e instanceof Error&&(a.push(e),s.handleCallback(e)))}}else for(let e=0;e<n.length;e++){let t=n[e];const r=o[e];if(t){if(null===r||void 0===r||!r.disableCheck)continue;let e=t.handleValid("blur");e instanceof Error?(a.push(e),t.handleCallback(e)):(e=t.handleValid("change"),e instanceof Error&&(a.push(e),t.handleCallback(e)))}}}n instanceof Function&&n(a)},fieldConfig:e=>t=>{let n,a,o,r=t.indexOf("-")>0&&e.model.sub.length;if(r){if(n=t.split("-")[0],t=t.split("-")[1],e.model.main){let t=e.model.main.fields;for(let e=0;e<t.length;e++)t[e].code===n&&(o=t[e].refModelId)}let r=e.model.sub;for(let e=0;e<r.length;e++)r[e].id===o&&(a=r[e].fields);if(!a){let t=e.model.assist;for(var s=0;s<t.length;s++)t[s].code===n&&(a=t[s].fields)}}else a=e.model.main.fields;if(a)for(let e=0;e<a.length;e++)if(a[e].code===t)return a[e];return null}},S={[r](e,t){e.configs=t},[s](e,t){e.token=t},[i](e,t){e.userInfo=t,t?console.log("已设置user，用户已登录！",t):console.log("用户已退出")},[u](e,t){e.data.biz=t},[l](e,t){e.data.conf=Object.assign(e.data.conf,t)},[c](e,t){e.resource=t},[d](e,t){e.grids=t},[p](e,t){e.model=Object.assign(e.model,t)},[f](e,t){e.disabled=t},[m](e,t){e.hideSign=t},[g](e,t){e.taskInfo=t},[h](e,t){e.dirName=t},[_](e,t){e.system=t},[b](e,t){e.formConfiguration=t},[y](e,t){e.validRefs[t.code]=t},[k](e,t){e.validRefs[t.code]=null},[w](e,{codes:t,bool:n}){t.forEach(t=>{const a=e.checkMap[t];a?e.checkMap[t].disableCheck=n:e.checkMap[t]={disableCheck:n}})},[v](e,t){e.operationApp=t}};n("f358"),n("dd17");const{oidcSettings:E}=window.projectConfig,A={formTheme:"basic",checkMap:{},configs:null,token:null,userInfo:null,grids:[],disabled:!1,hideSign:!0,formConfiguration:null,taskInfo:{},validRefs:{},data:{biz:{},task:{},sign:{},user:{},conf:{platform:"pc",IsDraft:!1,IsDeleteDraft:!1}},dirName:"",model:{main:null,assist:[],sub:[]},system:null,resource:{},operationApp:!1};a["default"].use(o["a"]);t["a"]=new o["a"].Store({state:A,getters:P,actions:O,mutations:S})},"49f8":function(e,t,n){var a={"./en.json":"edd4","./zh.json":"3504"};function o(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id="49f8"},"4a60":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var a=n("4a9d"),o=n("163b");function r(e,t){let n=void 0;"string"===typeof e&&t&&(n={},n[e]=t),Object(o["b"])(n||e,(e,t)=>{e&&a["a"].$on(t,e)})}function s(e){"string"===typeof e?a["a"].$off(e):Object(o["b"])(e,(e,t)=>{console.log("注销事件",isNaN(t)?t:e),a["a"].$off(isNaN(t)?t:e)})}},"4a9d":function(e,t,n){"use strict";var a=n("a026");function o(){}t["a"]=new a["default"],a["default"].prototype.createEvent=function(e){var t=new o;return t.init(e),t},o.prototype.stopPropagation=function(){this.cancelBubble=!0},o.prototype.preventDefault=function(){this.defaultPrevented=!0},o.prototype.init=function(e){Object.assign(this,e||{})}},"53d9":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s}));n("14d9");var a=n("a18c");const o=e=>"portal"===e.data.source,r=[{matcher(e){return!1},handler(e){console.log(e)}},{matcher(e){return o(e)&&"seeAllApp"===e.data.event},handler(e){a["default"].push("/apps")}},{matcher(e){const t=["my-todo","personalCenter"];return o(e)&&t.includes(e.data.event)},handler(e){a["default"].push("/work")}},{matcher(e){return o(e)&&"clickTask"===e.data.event},handler(e){const{data:t}=e.data;a["default"].push(`${t.appUrl}/${t.id}`)}},{matcher(e){return o(e)&&"clickApp"===e.data.event},handler(e){const{data:t}=e.data;a["default"].push({path:`/app/${t.id}/${t.displayNameForApp}`})}},{matcher(e){return o(e)&&"click-search"===e.data.event},handler(e){a["default"].push({path:"/apps?autofocus=true"})}}],s=e=>r.push(e)},"6e16":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return i}));var a=n("3e90");let o={};const r=Object(a["a"])({templatePrintWord:{enable:!0,text:"模板打印（word）",print:()=>{o.handlePrints("wordTemp")}},templatePrintPDF:{enable:!0,text:"模板打印（PDF）",print:()=>{o.handlePrints("pdfTemp")}},undersign:{enable:!0,text:"文件签署",print:()=>{o.handlePrints("sign")}}}),s=r.value,i=e=>{var t;(o=e,e.isProcess)?r.value.undersign.enable="True"===(null===(t=e.config.stepInfo)||void 0===t||null===(t=t.attributes)||void 0===t?void 0:t.EnableSign):r.value.undersign.enable=e.config.formConfiguration.extension.enableSign}},"6e81":function(module,__webpack_exports__,__webpack_require__){"use strict";var _Base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("9837"),_utils_EventBus__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4a9d"),_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4360"),_i18n__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("12cb"),dayjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5a0c"),dayjs__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_4__);__webpack_exports__["a"]={isIdCard:{name:"身份号码验证",validator(e){if(e){let t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return t.test(e)}return!0},message:_i18n__WEBPACK_IMPORTED_MODULE_3__["a"].t("请输入正确的身份证号码")},isEmail:{name:"邮箱地址验证",validator(e){if(e){let t=/\w[-\w.+]*@([A-Za-z0-9][-A-Za-z0-9]+\.)+[A-Za-z]{2,14}/;return t.test(e)}return!0},message:_i18n__WEBPACK_IMPORTED_MODULE_3__["a"].t("请输入正确邮箱地址")},isMobile:{name:"手机号码验证",validator(e){if(e){let t=/^1(3|4|5|6|7|8|9)\d{9}$/;return t.test(e)}return!0},message:"请输入正确手机号码"},isPhone:{name:"电话号码验证",validator(e){if(e){let t=/[0-9-()（）]{7,18}/;return t.test(e)}return!0},message:_i18n__WEBPACK_IMPORTED_MODULE_3__["a"].t("请输入正确电话号码")},compareDate:{name:"日期比较验证",validator(value,rule,message,config){let fields={},express=config.extension.validExtension,codes=[];if(!express)return void(rule.message="缺少验证规则");codes=express.replace(/[>=<]/g,",").replace(/,,/g,",").split(",");let str="";for(let e=0;e<codes.length;e++){let t=codes[e],n=Object(_Base__WEBPACK_IMPORTED_MODULE_0__["g"])(t);if(null==n)return void(rule.message="缺少比较字段");fields[t]=Object(_Base__WEBPACK_IMPORTED_MODULE_0__["f"])(t),str+="let "+t+`= ${dayjs__WEBPACK_IMPORTED_MODULE_4___default()(n).valueOf()};`}let state=!1;eval(str+"state = "+express);let keys=Object.keys(fields);for(let e=0;e<keys.length;e++){let t=keys[e];express=express.replace(t,fields[t].configuration.name)}return express=express.replace("<","需小于").replace("<=","需小于等于").replace(">","需大于").replace(">=","需大于等于"),rule.message=express,state&&_utils_EventBus__WEBPACK_IMPORTED_MODULE_1__["a"].$emit("iform.form.validate",codes),state}},fieldLength:{name:"字段长度验证",validator(e,t,n,a){let o=!0;var r=_store__WEBPACK_IMPORTED_MODULE_2__["a"].getters.fieldConfig(a.code);if(r&&r.dataLength){let a=1*r.dataLength;isNaN(a)||null===e||e.length>a&&(o=!1,t.message=n.replace("{length}",a))}return o},message:"内容过长,最大{length}"}}},7046:function(e,t,n){},"72ba":function(e,t,n){"use strict";n("a96c")},"79fa":function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return y})),n.d(t,"g",(function(){return k}));n("b0d0");var a=n("3c69"),o=n("e443"),r=n("99b1");const s=(e,t="form")=>Object(o["b"])({method:"post",url:r["a"].iform.downLoadLanguage,headers:{"Content-Type":"application/json; charset=UTF-8"},params:{dirName:t,fileName:e}});var i=n("12cb"),c=n("a78e"),u=n.n(c);const l={common:"common",appList:"appList",application:"application",form:"form",process:"process"},d="iduo-web-lang",p=".AspNetCore.Culture",f=(e,t)=>{if(!_().toLowerCase().includes("zh"))return s(e,t).then(({data:t})=>{if(t&&9===t.code){const t=e+"语言包不存在或出现错误，请检查！";return t}for(const e in t)if(Object.hasOwnProperty.call(t,e)){const n=t[e];i["a"].mergeLocaleMessage(e,n)}return y(),"success"})},m={i18n:["zh","en"],vant:{zh:"zh-CN",en:"en-US"}},g=()=>window.navigator.language.includes("zh-"),h=()=>window.navigator.language.includes("en"),_=()=>{const e=u.a.get(p);if(e){const t=decodeURIComponent(e);return t.split("|")[0].split("=")[1]}return localStorage.getItem(d)||"zh"},b=e=>{localStorage.setItem(d,e),u.a.set(p,`c=${e}|uic=${e}`,{expires:365,sameSite:"Lax"})},y=()=>{g()?k("zh"):h()?k("en"):k("zh")},k=(e="zh")=>{m.i18n.includes(e)&&(i["a"].locale=e,w(e),b(e))},w=e=>{const t=m.vant[e];n("b2b9")("./"+t).then(t=>{a["a"].use(m.vant[e],t.default)})};t["a"]={i18n:i["a"],loadLanguage:f,switchLang:k,getCurrentLang:_}},9292:function(e,t,n){"use strict";var a=n("e443"),o=n("163b"),r=n("18a0"),s=n.n(r);const i=e=>{const t=window.projectConfig.localWXConfig.signPath,n=Object(o["d"])(),r=window.indexPathOnIos,s=Object(o["m"])()?r:n;return Object(a["b"])({url:t,method:"post",headers:{...a["b"].contentType.appJson.headers},data:{...e,url:s}})},c=async(e={})=>{const t="iduo-form-mobile",n=parseInt(Date.now()/1e3).toString(),{data:a}=await i({nonceStr:t,timeStamp:n}),o=window.projectConfig.localWXConfig,{code:r,data:{corpId:c,signature:u}}=a,l={appId:c,timestamp:n,nonceStr:t,signature:u,...o,...e};return s.a.config(l),s.a},u="\n/**\n * setWXConfig(options)\n * @param { Object } options 配置 用于 重写 wx.config 方法的参数中的部分成员\n * @returns Promise<wx-js-sdk> 返回一个 包含 wxSDK 的Promise\n * 可重写的成员: beta debug jsApiList\n */\n\n/**\n * wx\n * 微信 sdk 原始对象，拥有 ready 等方法\n */\n";t["a"]={setWXConfig:c,help:u,wx:s.a}},9569:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("d3be"),o=n("3e90");const r=Object(o["a"])([]);async function s(){const{code:e,data:t}=await a["f"].getDictionaryByGroup("ValidationRules");1===e&&(r.value=t)}},9837:function(e,t,n){"use strict";n.d(t,"a",(function(){return oe})),n.d(t,"b",(function(){return re})),n.d(t,"f",(function(){return se})),n.d(t,"g",(function(){return ie})),n.d(t,"k",(function(){return ce})),n.d(t,"d",(function(){return ue})),n.d(t,"e",(function(){return le})),n.d(t,"h",(function(){return fe})),n.d(t,"c",(function(){return me})),n.d(t,"j",(function(){return ge})),n.d(t,"i",(function(){return he}));n("14d9");var a=n("e443"),o=n("c987"),r=n("6e16"),s=n("4a60"),i=n("4a9d"),c=n("79fa"),u={get taskInfo(){return iduo.refs["form-target"].task},setVariable(e,t){if("string"===typeof e){const n=e;i["a"].$emit("iform.task.setVariableByKey",n,t)}"object"===typeof e&&i["a"].$emit("iform.task.setVariable",e)},setSummary(e){i["a"].$emit("iform.task.setSummary",e)},getVariable(e){return iduo.refs["form-target"].getVariable(e)},isStep(e){return iduo.refs["form-target"].task.stepId===e}},l=n("bf26"),d=n("3bce"),p={getControl(e){return iduo.refs[e]},setVisible(e,t){i["a"].$emit("iduo.form.visible",e,t)},firstSubmitToggle(e){i["a"].$emit("iform.firstSubmit.toggle",e)},setReadonly(e,t=!0){e=Array.isArray(e)?e:[e],e.forEach(e=>{iduo.refs[e].configuration.isReadable=t})},setRequired(e,t){e=Array.isArray(e)?e:[e];const n="van-cell--required",a=["combobox","combogrid","combotree","ocbox","datebox"],o=e=>a.includes(e)?"change":"blur",r=(e,t)=>new l["b"](e,"此字段必填",o(t));if(0===e.length||"boolean"!==typeof t)return void console.error("设置必填失败：参数错误! 需要一个code或多个code的数组和一个布尔值");const s=e.map(e=>(e.replace(".","-"),[iduo.refs[e],iduo.refs["form-check-"+e]]));s.forEach(([e,a])=>{if(console.log(e,a),!e||!a)return;const o=e.$parent.$parent.$el.classList,{code:s,controlType:i}=e.configuration,{rules:c}=a;let u=c.find(e=>"required"in e);if(!u){const e=r(s,i);c.push(e),u=e}u.required=t,t?o.add(n):o.remove(n)})},toggleApprovalVisible(e){if("boolean"!==typeof e){const e=!iduo.refs["form-target"].iformApprovalVisible;iduo.refs["form-target"].iformApprovalVisible=e}else iduo.refs["form-target"].iformApprovalVisible=e},disableSubmit(e=!0){iduo.refs["form-target"].allowSubmit=!e},disableForm(e=!0){iduo.refs["form-target"].setTableDisabled(e)}};const f=["date","datetime","year-month","time"];var m={getUIValue(e){if(!e)return;const t=iduo.refs[e.replace(".","-")];return t?f.indexOf(t.type)>-1?Object(d["f"])(t.value,t.type):t?t.value:null:null},setUIValue(e,t){if(!e)return;const n=iduo.refs[e.replace(".","-")];n?n.setValue?n.setValue.call(this,t):n.data[n.configuration.code]=t:console.log("control not found")},setBpmData(e){i["a"].$emit("iform.task.setBpmData",e)}},g=n("5a0c"),h=n.n(g),_={dayjs:h.a},b={get target(){return iduo.refs["iduo.dialog"]},open(e){let t={title:"信息提醒",width:"60%",content:"",type:"html",url:""};i["a"].$emit("sdk.dialog.show",Object.assign(t,e))},close(){i["a"].$emit("sdk.dialog.close")}},y=(n("d9e2"),n("163b"));const k=()=>{var e;return null===(e=window.indexPathOnIos)||void 0===e?void 0:e.includes("oidc-callback")},w=()=>k()?window.indexPathOnIos:encodeURIComponent(window.indexPathOnIos),v=()=>encodeURIComponent(Object(y["d"])()),O=()=>{const e=window.projectConfig.localDingTalkConfig.signPath;let t=Object(y["d"])();return Object(y["m"])()&&(t=v()),Object(y["g"])()&&(t=w()),console.log(t),Object(a["b"])({url:e,params:{url:t}})},T=async(e={})=>{const{data:t}=await O(),n=window.projectConfig.localDingTalkConfig,{nonceStr:a,data:{agentId:o,corpId:r,signature:s},timeStamp:i}=t,c={agentId:o,corpId:r,timeStamp:i,nonceStr:a,signature:s,type:0,...n,...e};if(1===t.code)return dd.config(c),window.dd},C=async(e,t)=>{let n=Object(y["d"])();Object(y["m"])()&&(n=v()),Object(y["g"])()&&(n=w());let a={};try{a=await e(n)}catch(o){new Error(o)}return dd.config({...a,...t}),window.dd},I="\n/**\n * setDingTalkConfig(options)\n * @param { Object } options 配置 用于 重写 dd.config 方法的参数中的部分成员\n * @returns Promise<dingtalk-jsapi> 返回一个 包含 dingtalk-jsapi 的Promise\n * 可重写的成员: jsApiList type\n */\n\n/**\n * dd\n * 钉钉 sdk 原始对象，拥有 ready 等方法\n */\n";var P={dd:dd,setDingTalkConfig:T,sign:C,help:I},S=n("07e6"),E={target(e){let t=iduo.refs;if(e)return t["grid-"+e];{let e=Object.keys(t);for(let n=0;n<e.length;n++)if(0===e[n].indexOf("grid-"))return t[e[n]]}return null},append(e,t){let n=iduo.grid.target(e);n&&(t=t||void 0,Array.isArray(t)?t.forEach(e=>{n.append(e)}):n.append(t))},remove(e,t){let n=iduo.grid.target(e);n&&(t=isNaN(1*t)?0:t,n.remove(t))},removeAll(e){let t=iduo.grid.target(e);t&&t.removeAll()},save(e){let t=iduo.grid.target(e);t&&t.save()}},A=n("365c"),D=n("e1b8"),j=n("cee4"),M={Axios:j["a"],request(e){const t={...e},n=D["a"].getToken(),{headers:o}=t;return t.headers={...o,Authorization:"Bearer "+n.access_token},Object(a["b"])(t)},get(e,t,n){return new Promise((o,r)=>{a["b"].get(e,t,n||{}).then(e=>{o(e)}).catch(e=>{r(e)})})},post(e,t,n){return new Promise((o,r)=>{a["b"].post(e,t,n||{}).then(e=>{o(e)}).catch(e=>{r(e)})})},parseDataSource(e,t,n="",a={}){return new Promise((o,r)=>{A["d"].getResourceBySqlKey(e,t,n,a).then(e=>{o(e.data)}).catch(e=>{r(e)})})}},x=(n("e17f"),n("2241")),B=(n("9a83"),n("f564")),U=(n("46a1"),n("450d"),n("e5f2")),R=n.n(U),L=(n("be4f"),n("896a")),F=n.n(L),N=(n("9e1f"),n("6ed5")),$=n.n(N),W=(n("0fb7"),n("f529")),q=n.n(W),G={Message:q.a,MessageBox:$.a,Loading:F.a,Notification:R.a,alert(e){Object(B["a"])(e)},success(e){Object(B["a"])({type:"primary",message:e})},warning(e){Object(B["a"])({type:"warning",message:e})},error(e){Object(B["a"])({type:"danger",message:e})},loading(e){i["a"].$emit("iduo.form.loading",e)},endLoading(){i["a"].$emit("iduo.form.endLoading")},confirm(e,t,n,a){return x["a"].confirm({title:e||"提示",message:t||""}).then(e=>(n instanceof Function&&n.call(this),e)).catch(e=>{throw a instanceof Function&&a.call(this),Error(e)})}},V=(n("907a"),n("986a"),n("1d02"),n("3c5d"),n("6ce5"),n("2834"),n("4ea1"),n("72ba7")),K=n("d044"),z=n.n(K);Array.prototype.GroupBy=e=>{let t={};for(let n=0;n<(void 0).length;n++){let a=(void 0)[n],o=a[e];t[o]||(t[o]=[]),t[o].push(a)}return t};const J={getGuid(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a},getConfig(e){let t=e.split(","),n=null;for(var a=0;a<t.length;a++)n=null===n?config[t[a]]:n[t[a]];return n},getUrlVar(e){let t=window.location.search.substring(1),n=t.split("&");for(let a=0;a<n.length;a++){let t=n[a].split("=");if(t[0]===e)return t[1]}return null},createQrCode(e,t="",n={width:150,height:150}){const a='help:\n    @param {HTMLElement|String} el target element or \'id\' attribute of element.\n    @param {String} text QRCode link data\n    @param {Object} options\n    @param {Number} [options.width=150]\n    @param {Number} [options.height=150]\n    @param {String} [options.colorDark="#000000"]\n    @param {String} [options.colorLight="#ffffff"]';e&&t?new z.a(e,{text:t,...n}):console.log(a)},log(e){return A["d"].writeLog(e)},async zip(e,t,n){const{compressionLevel:a=6,downloadable:o=!1}=n||{},r=await Promise.all(t.map(e=>fetch(e.url).then(e=>e.arrayBuffer()).then(e=>new Uint8Array(e)))),s={};r.forEach((e,n)=>{const a=t[n].name;s[a]=e});const i=Object(V["a"])(s,{level:a}),c={result:i,download:()=>{Object(d["a"])(new Blob([i]),e)}};return o&&Object(d["a"])(new Blob([i]),e),c}};var H=J,Y=n("18a0"),X=n.n(Y);const Q=()=>{const e=window.projectConfig.localWXConfig.signPath,t=Object(y["d"])(),n=window.indexPathOnIos,o=Object(y["m"])()?n:t;return Object(a["b"])({url:e,params:{url:encodeURIComponent(o)}})},Z=async(e={})=>{const{data:t}=await Q(),n=window.projectConfig.localWXConfig,{nonceStr:a,data:{corpId:o,signature:r},timeStamp:s}=t,i={nonceStr:a,timestamp:+s,appId:o,signature:r,...n,...e};if(1===t.code)return X.a.config(i),X.a},ee="\n/**\n * setWXConfig(options)\n * @param { Object } options 配置 用于 重写 wx.config 方法的参数中的部分成员\n * @returns Promise<wx-js-sdk> 返回一个 包含 wxSDK 的Promise\n * 可重写的成员: beta debug jsApiList\n */\n\n/**\n * wx\n * 微信 sdk 原始对象，拥有 ready 等方法\n */\n";var te={setWXConfig:Z,help:ee,wx:X.a},ne=n("9292");let ae={};function oe(){let e={refs:ae,http:M,msg:G,data:m,bpm:u,controls:p,utils:H,grid:E,form:S["a"],dialog:b,event:{eventOn:s["b"],eventOff:s["a"],eventBus:i["a"]},user:null,loginUser:null,task:null,clientType:"mobile",lang:c["a"],wxSign:te,wxSDK:ne["a"],dingTalkSign:P,signList:null,formula:o["a"],date:_,prints:r["b"]};Object(s["b"])("form.setTask",t=>{e.task=t}),Object(s["b"])("form.setUser",t=>{e.user=t}),Object(s["b"])("form.setLoginUser",t=>{e.loginUser=t}),Object(s["b"])("setSignList",t=>{e.signList=t}),Object.assign(window,{iduo:e})}function re(e,t){let n={};n[e]=t,Object.assign(ae,n)}function se(e){return ae[e]}function ie(e){return ae[e]?ae[e].value:null}function ce(e,t){if(!e)return;const n=ae[e.replace(".","-")];n?n.setValue?n.setValue.call(this,t):n.data[e]=t:console.error(`没有找到 code 为${e} 的控件`)}function ue(e){let t=[];const n=/\{(.+?)\}/g;return e.replace(n,(e="")=>{const n=e.replace(/\{|\}/g,"").replace(".","-");t.push(n)}),t}function le(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a}const de='iduo.event.eventOn("form.onLoad", function (a) {});\niduo.event.eventOn("form.onValidateBefore", function (a, b) {\n  b();\n});\niduo.event.eventOn("form.onValidateAfter", function (a) {});\niduo.event.eventOn("form.onSubmitBefore", function (a, b) {\n  b();\n});\niduo.event.eventOn("form.onSubmitAfter", function (a) {});\n';function pe(e){const t=document.createElement("script");t.innerHTML=e,document.body.append(t)}async function fe(e,t){try{const n=await a["b"].get(e);if(n.data)return pe(n.data),void t();pe(de),t()}catch(n){pe(de),t()}}async function me(e){if(!e)return;const t=await a["b"].get(e);t.data&&pe(t.data)}function ge(){const e=["form.onLoad","form.onValidateBefore","form.onValidateAfter","form.onSubmitBefore","form.onSubmitAfter"];i["a"].$off(e)}function he(e,t=100){const n=setInterval(()=>{e(a)},t),a=()=>clearInterval(n)}},"99b1":function(e,t,n){"use strict";var a=n("f253");t["a"]={oc:{userpicker:a["f"]+"/OrgPicker/CrossPicker?disableGroup=0",ocPickerJs:a["f"]+"/orgselector/modal.js",getuserinfo:a["f"]+"/api/ToEngine/GetUserDetail",smsCode:a["f"]+"/api/NewOchart/SmsCode",validateCode:a["f"]+"/api/NewOchart/ValidateCode"},app:{getMyCollectionAppOnMobile:a["b"]+"/api/App/GetMyCollectionAppOnMobile",getMyHotApps:a["b"]+"/api/App/GetMyHotApps",getHotApp:"http://dev.iduo.cc:5008/api/Mobile/getHotApp",getMyAppsByLabels:a["b"]+"/api/App/getMyAppsByLabels",getMyAppsOrderByType:a["b"]+"/api/App/getMyAppsOrderByType",cancelApplication:a["b"]+"/api/App/CancelMyAppCollect",createApplication:a["b"]+"/api/App/CreateMyAppCollect",getRoleMenu:a["b"]+"/api/Menus/getByRoles",getUserAppViewAndMenu:a["b"]+"/api/App/GetUserAppViewAndMenu",getAppDepts:a["b"]+"/api/App/getAppDepts",getAllApps:a["b"]+"/api/App/getAllApps",getAppViewById:a["b"]+"/api/App/getAppViewById",saveAppDetail:a["b"]+"/api/App/saveAppDetail",getByResourceCode:a["b"]+"/api/Permissions/getByResourceCode",createPermissions:a["b"]+"/api/Permissions/create",deletePermissions:a["b"]+"/api/Permissions/delete",insertVisitApp:a["b"]+"/api/App/InsertVisitApp"},iform:{getFormInfo:a["d"]+"/api/FormHandler/GetFormInfo",getListFormInfo:a["d"]+"/api/FormHandler/GetListFormInfo?formId=",getListBizData:a["d"]+"/api/FormHandler/GetListBizData?formId=",getPublishProcessDefinitionByName:a["c"]+"/api/ProcessDefinition/GetPublishProcessDefinitionByName?processName=",getProcessFormInfo:a["d"]+"/api/FormHandler/GetProcessFormInfo?taskId=",GetProcessFormData:a["d"]+"/api/FormHandler/GetProcessFormData?taskId=",getFormResource:a["d"]+"/api/DataSource/GetFormResource?formId=",getResourceBySqlKey:a["d"]+"/api/DataSource/GetDataSourceByNo?sqlNo=",getResourcePageBySqlKey:a["d"]+"/api/DataSource/GetDataSourcePageByNo?sqlNo=",getSqlConfig:a["d"]+"/api/DataSource/GetDataSourceConfigbySqlNo?sqlNo=",getAttachment:a["d"]+"/api/FormExtend/GetAttachment",uploadHost:a["c"],uploadFile:a["d"]+"/api/FormExtend/UploadFiles",saveUploadFile:a["d"]+"/api/FormExtend/UploadFile",deleteFile:a["d"]+"/api/FormExtend/DeleteFile",getSerialNo:a["d"]+"/api/FormExtend/GetSerialNo",submitBusinessForm:a["d"]+"/api/FormHandler/SubmitBusinessForm",submitProcessForm:a["d"]+"/api/FormHandler/SubmitProcessForm",autoSubmitProcessForm:a["d"]+"/api/FormHandler/AutoSubmitProcessForm",getSiginList:a["d"]+"/api/FormHandler/GetSiginList",getProcessStepByVersion:a["c"]+"/api/ProcessInstance/GetProcessStepByVersion",getSigntureTaskListByTaskId:a["c"]+"/api/InstanceTask/GetSigntureTaskListByTaskId?taskId=",takeBackSignatureTask:a["c"]+"/api/InstanceTask/TakeBackSignatureTask",createSysSininInfo:a["d"]+"/api/FormHandler/CreateSysSininInfo",createDraft:a["d"]+"/api/FormHandler/CreateDraft",updateDraft:a["d"]+"/api/FormHandler/UpdateDraft",getProcessFormInfoByStepId:a["d"]+"/api/FormHandler/getProcessFormInfoByStepId",getDraftById:a["d"]+"/api/FormHandler/GetDraftById?id=",deleteDraft:a["d"]+"/api/FormHandler/DeleteDraft?ids=",checkFileExist:a["d"]+"/api/FormExtend/CheckFileExist?path=",GetFileByte:a["d"]+"/api/FormExtend/GetFileByte",getMyDarflistPage:a["d"]+"/api/FormHandler/GetMyDraftListPage",SubmitProcessFormNotBizData:a["d"]+"/api/FormHandler/SubmitProcessFormNotBizData",writeLog:a["d"]+"/api/FormExtend/WriteLog",downLoadLanguage:a["d"]+"/api/FormExtend/DownLoadLanguage",getDataTable:a["d"]+"/api/DataSource/GetDataTable",updateAttachmentSourceId:a["d"]+"/api/FormExtend/UpdateAttachmentSourceId",addComment:a["d"]+"/api/FormHandler/AddComment",cancelComment:a["d"]+"/api/FormHandler/CancelComment",comments:a["d"]+"/api/FormHandler/Comments",getDictionaryById:a["d"]+"/api​/FuncDictionary​/GetDictionaryById",getDictionaryByGroup:a["d"]+"/api/FuncDictionary/GetDictionarysByGroup",downLoadTemp:a["d"]+"/api/FormExtend/DownLoadTemp",downloadFormByWord:a["d"]+"/api/FormHandler/DownloadFormByWord",downloadListByWord:a["d"]+"/api/FormHandler/DownloadListByWord",addSignature:a["d"]+"/api/Signature/AddSignature",getSignatures:a["d"]+"/api/Signature/MySignatures",getMyLatestSignature:a["d"]+"/api/Signature/MyLatestSignature",addSysFormSnapshot:a["d"]+"/api/FormExtend/AddSysFormSnapshot",updateSysFormSnapshot:a["d"]+"/api/FormExtend/UpdateSysFormSnapshot",getSysFormSnapshotByTask:a["d"]+"/api/FormExtend/GetSysFormSnapshotByTask",deleteSysFormSnapshots:a["d"]+"/api/FormExtend/DeleteSysFormSnapshots"},task:{getMyApplyTask:a["c"]+"/api/InstanceTask/GetApplyTasks",getMyInboxTask:a["c"]+"/api/InstanceTask/GetTaskForMobile",getCompleteTask:a["c"]+"/api/InstanceTask/GetCompleteTasks",getprocessMap:a["c"]+"/api/ProcessManager/GetProcessMonitorByProcessNameAndInstaceId",getprocessStep:a["c"]+"/api/ProcessInstance/GetProcessStepByVersion",assignetasktouser:a["c"]+"/api/ProcessManager/AssignedTaskToUser",processmap:a["c"]+"/api/ProcessInstance/ExportProcessImage",signtrueTask:a["c"]+"/api/InstanceTask/SignatureTask",submittaskForm:a["c"]+"/api/InstanceTask/SubmitTask",cancleInstacTask:a["c"]+"/api/ProcessInstance/AbortIncident",returnInstaceTask:a["c"]+"/api/InstanceTask/ReturnTask",getInstanceActiveTasks:a["c"]+"/api/InstanceTask/GetInstanceActiveTasks?instanceId=",getinstacetaskCount:a["c"]+"/api/InstanceTask/GetInstanceTaskCount",getNotifyTaskCount:a["c"]+"/api/InstanceTask/GetNotifyTaskCount",getApplyTaskCount:a["c"]+"/api/InstanceTask/GetApplyTaskCount",getNotifyTasks:a["c"]+"/api/InstanceTask/GetNotifyTasks",getCompleteTaskCount:a["c"]+"/api/InstanceTask/GetCompleteTaskCount",readNotifyTask:a["c"]+"/api/InstanceTask/ReadNotifyTask",urgeTask:a["c"]+"/api/InstanceTask/UrgeTask",getProcessFormParseConfiguration:a["c"]+"/api/FormModel/getProcessFormParseConfiguration?taskId=",taskOverviewMap:a["c"]+"/api/InstanceTask/TaskOverviewMap",getProcessViewType:a["c"]+"/api/InstanceTask/GetProcessViewType",isHaveSingurateTask:a["c"]+"/api/InstanceTask/IsHaveSingurateTask"},orginzation:{getTree:a["f"]+"/api/Ochart/Trees",getSearch:a["f"]+"/api/Ochart/Search",getAllUserExpands:a["e"]+"/api/NewOchart/GetAllUserExpands",register:a["e"]+"/api/NewOchart/Register",smsCode:a["e"]+"/api/NewOchart/SmsCode",passwordPolicy:a["e"]+"/api/Users/IdentityOptions/Password",userRegisteredWithExternal:a["e"]+"/api/NewOchart/UserRegistedWithExternal"},notify:{SendDingTalkMsg:a["g"]+"/api/DingTalk/SendDingTalkMsg",SendWeChatMessage:a["g"]+"/api/WeChat/SendWeChatMessage"},report:{getCharts:a["i"]+"/api/Report/getCharts",getReportInfoById:a["i"]+"/api/report/getbyid",getChartsByPageId:a["i"]+"/api/ReportChart/getChartsByPageId",getChartOptionByChartId:a["i"]+"/api/ReportChart/getChartOption",getChartOptionAndFilter:a["i"]+"/api/ReportChart/getChartOptionAndFilter"},uploadPath:a["d"],processCenter:{createTask:a["c"]+"/api/ProcessCenter/CreateTask",updateTask:a["c"]+"/api/ProcessCenter/UpdateTask",launchProcess:a["c"]+"/api/ProcessCenter/LaunchProcess",updateInstance:a["c"]+"/api/ProcessCenter/UpdateInstance",deleteTasks:a["c"]+"/api/ProcessCenter/DeleteTasks",deleteInstances:a["c"]+"/api/ProcessCenter/DeleteInstances",getAgent:a["c"]+"/api/ProcessCenter/GetAgent",getInstanceTaskCount:a["c"]+"/api/ProcessCenter/GetInstanceTaskCount",getCompleteTasks:a["c"]+"/api/ProcessCenter/GetCompleteTasks",getApplyTasks:a["c"]+"/api/ProcessCenter/GetApplyTasks"},sign:{getSignFile:a["d"]+"/api/SignFile/get",signByBiz:a["d"]+"/api/SignFile/signByBiz"},ai:{getOrUpdateMessage:a["a"]+"/api/conversation/getOrUpdateMessage"}}},"9f8c":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={SOME:"some",EVERY:"every"}},a18c:function(e,t,n){"use strict";n.r(t),n.d(t,"routerMap",(function(){return b}));var a=n("a026"),o=n("8c4f"),r=(n("14d9"),n("4360"));const s="BLACK LIST",i=(e,t,n)=>{if(!0===e.meta.isPublic)n();else{const t=l().map(e=>e.name).includes(s);t&&["home","mywork","apps"].includes(e.name)?n({name:"403"}):n()}},c=[/^\/app\/((?:[^\/]+?))\/home\/approvalCenter\/((?:[^\/]+?))(?:\/(?=$))?$/i,/^\/home(?:\/(?=$))?$/i,/^\/work(?:\/(?=$))?$/i,/^\/apps(?:\/(?=$))?$/i,/^\/processmap\/((?:[^\/]+?))(?:\/(?=$))?$/i],u=(e,t)=>{const n=l().map(e=>e.Name).includes("Visitor"),a=c.some(t=>t.test(e.path));n&&a&&k.push({name:"403"})},l=()=>{const{UserRoles:e=[]}=r["a"].state.userInfo||{};return Array.isArray(e)?e:[e]};var d=n("163b"),p=n("dca2");const{tabbar:f}=window.projectConfig,m=o["a"].prototype.push;o["a"].prototype.push=function(e){return m.call(this,e).catch(e=>e)},a["default"].use(o["a"]);const g=!0,h=!0,_=[{name:"wei-home",path:"home",props:g,component:()=>n.e("chunk-5f206aab").then(n.bind(null,"dd8d")),redirect:{name:"work-bench"},children:[{name:"work-bench",path:"workBench",props:g,component:()=>n.e("chunk-4f82110c").then(n.bind(null,"26ea"))},{name:"approval-center",path:"approvalCenter",props:g,component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("chunk-8a3b30f8"),n.e("chunk-8f52edb8")]).then(n.bind(null,"f0c9"))},{path:"approvalCenter/:originalType",props:g,component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("chunk-8a3b30f8"),n.e("chunk-8f52edb8")]).then(n.bind(null,"f0c9"))},{name:"handling-guideline",path:"handlingGuideline",props:g,component:()=>n.e("chunk-04cdeeaa").then(n.bind(null,"5e9f"))}]},{name:"itask",path:":pageId/:pageName/itask/:id",props:g,component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-47a4c1f3"),n.e("chunk-fb854dba")]).then(n.bind(null,"68c0"))},{name:"iform",path:":pageId/:pageName/iForm/:id",props:g,component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-47a4c1f3"),n.e("chunk-a6800264")]).then(n.bind(null,"24b5"))},{name:"ilist",path:":pageId/:pageName/ilist/:id",props:g,component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-e34160b4")]).then(n.bind(null,"b58e"))},{name:"bpm",path:":pageId/:pageName/BPM/:originalType",props:g,component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("chunk-8a3b30f8"),n.e("chunk-2d0bce56")]).then(n.bind(null,"2a4e"))},{name:"bpm",path:":pageId/:pageName/Extend/:originalType",props:g,component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("chunk-8a3b30f8"),n.e("chunk-2d0bce56")]).then(n.bind(null,"2a4e"))},{name:"iframe",path:":pageId/:pageName/iframe",props:g,component:()=>n.e("chunk-6f64a775").then(n.bind(null,"cb99"))},{path:"processmap/:taskid",name:"processmap_in_app",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.core-js~987e6011"),n.e("chunk-1291992f"),n.e("chunk-0943e7b6"),n.e("chunk-0adf4dfc")]).then(n.bind(null,"0f16"))}],b=[{path:"/sign-out",name:"sign-out",props:({query:e,params:t})=>({...e,...t}),component:()=>n.e("chunk-2d0c9594").then(n.bind(null,"5982"))},{path:"/404",name:"404",component:()=>n.e("chunk-2d0e95df").then(n.bind(null,"8cdb"))},{path:"/signup/:code",props:!0,name:"signup",component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("npm.validator~0db9543e"),n.e("npm.babel-runtime~7da828cd"),n.e("chunk-54b344b6")]).then(n.bind(null,"87de")),meta:{isPublic:h}},{path:"/signup-callback",component:()=>n.e("chunk-2d2163b6").then(n.bind(null,"c21b")),meta:{isPublic:h}},{path:"/signup_result/:code",name:"signup_result",props:!0,component:()=>n.e("chunk-60598500").then(n.bind(null,"92aa")),meta:{isPublic:h}},{path:"/signature/:id",props:!0,name:"signature",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.core-js~987e6011"),n.e("chunk-0943e7b6"),n.e("chunk-a858eaea")]).then(n.bind(null,"0442"))},{path:"/403",name:"403",component:()=>n.e("chunk-2d0a32ea").then(n.bind(null,"00a5")),meta:{isPublic:h}},{path:"/work_task",name:"work_task",meta:{title:"工作台",keepAlive:!1},component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("chunk-8a3b30f8")]).then(n.bind(null,"0b4c")),props:e=>({...e.query})},{path:"/",name:"layout",component:()=>n.e("chunk-0bd66517").then(n.bind(null,"88e9")),children:[{path:"home",name:"home",meta:{title:"首页",keepAlive:!0},component:()=>n.e("chunk-52cf50ea").then(n.bind(null,"b3d7"))},{path:"work",name:"mywork",meta:{title:"工作台",keepAlive:!1},component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("chunk-8a3b30f8"),n.e("chunk-2dba5a0e")]).then(n.bind(null,"ada4"))},{path:"apps",name:"apps",meta:{title:"应用中心",keepAlive:!1},component:()=>n.e("chunk-3f9b5659").then(n.bind(null,"4722"))},{path:"apps_list",name:"apps2",meta:{title:"应用中心",keepAlive:!1},component:()=>n.e("chunk-3f9b5659").then(n.bind(null,"4722"))},{path:"/processmap/:taskid",name:"processmap",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.core-js~987e6011"),n.e("chunk-1291992f"),n.e("chunk-0943e7b6"),n.e("chunk-0adf4dfc")]).then(n.bind(null,"0f16"))},{path:"/news/:id",name:"news-info",meta:{title:"新闻"},component:()=>n.e("chunk-16313e20").then(n.bind(null,"2ffa"))}]},{path:"/form",name:"form",component:()=>n.e("chunk-0c09e6b1").then(n.bind(null,"c109")),children:[{path:"/itask/:id",name:"itask",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-47a4c1f3"),n.e("chunk-fb854dba")]).then(n.bind(null,"68c0")),meta:{requireAuth:!0}},{path:"/ilist/:id",name:"ilist",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-e34160b4")]).then(n.bind(null,"b58e")),meta:{requireAuth:!0}},{path:"/iform/:id",name:"iform",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-47a4c1f3"),n.e("chunk-a6800264")]).then(n.bind(null,"24b5")),meta:{requireAuth:!0}},{path:"/itask/:id/:draftId",name:"draft",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-47a4c1f3"),n.e("chunk-fb854dba")]).then(n.bind(null,"68c0")),meta:{requireAuth:!0}},{path:"/iview/:processId/:stepId",name:"iview",component:()=>Promise.all([n.e("npm.vant~253ae210"),n.e("npm.vant~d3c695a7"),n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("npm.element-ui~59f3426a"),n.e("npm.element-ui~d63aa588"),n.e("npm.element-ui~fb66671e"),n.e("npm.element-ui~fe785c75"),n.e("chunk-3454771f")]).then(n.bind(null,"6b98")),meta:{requireAuth:!0}}]},{path:"/app/:appId",props:g,component:()=>n.e("chunk-6f64a775").then(n.bind(null,"cb99")),children:_},{path:"/app/:appId/:appName",props:g,component:()=>n.e("chunk-6f64a775").then(n.bind(null,"cb99")),children:_},{path:"/voice_operated",name:"voice_operated",component:()=>n.e("chunk-1d5350de").then(n.bind(null,"34f9"))},{path:"/Accessibility/:processId",name:"Accessibility",props:!0,component:()=>n.e("chunk-68f8e6c6").then(n.bind(null,"9e5f"))},{path:"/app-menus",name:"AppMenus",component:()=>n.e("chunk-18bc6a48").then(n.bind(null,"0299"))},{name:"AppProject",path:"/app-project/:id",component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("chunk-59eb86eb")]).then(n.bind(null,"7335"))},{name:"approval-center-root",path:"/ApprovalCenterRoot",props:g,component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("chunk-8a3b30f8"),n.e("chunk-604d59c1")]).then(n.bind(null,"a669"))},{path:"/ApprovalCenterRoot/:originalType",props:g,component:()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("npm.core-js~987e6011"),n.e("chunk-8a3b30f8"),n.e("chunk-604d59c1")]).then(n.bind(null,"a669"))}],y=new o["a"]({mode:"history",routes:b});y.beforeEach((e,t,n)=>{window.indexPathOnIos||(window.indexPathOnIos=Object(d["d"])()),n()}),y.afterEach((e,t)=>{Object(d["q"])(e.meta.title)}),y.beforeEach(i),y.afterEach(u);var k=t["default"]=y;y.afterEach((e,t)=>{Object(p["b"])(e.path||e.path,e.name||e.path)})},a4a0:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g}));n("88a7"),n("271a"),n("5494");var a=n("eab1"),o=n("dca2"),r=n("cee4");function s(){return a["b"].value===a["a"].dingTalk_captive}async function i(){if(s()){const e=await Promise.all([n.e("npm.gdt-jsapi~bf9fe0ee"),n.e("chunk-6b646710")]).then(n.bind(null,"8c13"));return e.default.getAuthCode}return window.dd.getAuthCode}const{oidcSettings:c,dingTalkSettings:u}=window.projectConfig,l=r["a"].create({baseURL:c.authority,headers:{"Content-Type":"application/json"}}),d=e=>{const t=s()?"dingtalk_code_captive":"dingtalk_code",n=new URLSearchParams;return n.append("grant_type",t),n.append("client_id",c.client_id),n.append("client_secret",c.client_secret),n.append("code",e),l({url:"/connect/token",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n})},p=e=>(console.log("connectUserInfo",e),l({url:"/connect/userinfo",method:"POST",headers:{Authorization:"Bearer "+e}})),f=async e=>{const t=await d(e),n=await p(t.data.access_token);return t.data.profile=n.data,t.data},m=async(e,t={})=>{var n;const{refresh:r=!1}=t;e=null!==(n=e)&&void 0!==n?n:u.corpId;const s=Object(a["c"])();if(console.log("getAndUpdateUser",s),s&&s.expires_at>Date.now()&&!0!==r)return s;{const t=await i(),n=await t({corpId:e});console.log("getAuthCode:",n);const r=n.authCode||n.code,s=await f(r);return s.expires_at=Date.now()+1e3*s.expires_in,a["d"].value=s,Object(o["c"])(s.profile.UserAccount),Object(a["e"])(s),s}},g=e=>{e.beforeEach(async(e,t,n)=>{!0!==e.meta.isPublic?(console.log("setupDingTalkOidc:`to.meta.isPublic !== true`"),await m(),n()):n()})}},a96c:function(e,t,n){},b199:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c}));var a=n("e443"),o=n("99b1");t["a"]={getMyApplyList(e,t){return new Promise((n,r)=>{const s={...a["b"].contentType.appJson,params:t};a["b"].post(o["a"].task.getMyApplyTask,e,s).then(e=>{n(e.data)}).catch(e=>{r(e)})})},getMyInboxList(e,t){return new Promise((n,r)=>{const s={...a["b"].contentType.appJson,params:t};a["b"].post(o["a"].task.getMyInboxTask,e,s).then(e=>{n(e.data)}).catch(e=>{r(e)})})},getMyCompleteList(e,t){return new Promise((n,r)=>{const s={...a["b"].contentType.appJson,params:t};a["b"].post(o["a"].task.getCompleteTask,e,s).then(e=>{n(e.data)}).catch(e=>{r(e)})})},getProcessMap(e,t){return new Promise((n,r)=>{a["b"].get(o["a"].task.getprocessMap+`?processName=${e}&instanceId=${t}`).then(e=>{n(e)}).catch(e=>{r(e)})})},getProcessStep(e,t){return new Promise((n,r)=>{a["b"].post(o["a"].task.getprocessStep+`?processName=${e}&version=${t}`).then(e=>{n(e)}).catch(e=>{r(e)})})},getUserInfo(e){return new Promise((t,n)=>{a["b"].get(o["a"].oc.getuserinfo+"?userIds="+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},assignToUser(e,t){return new Promise((n,r)=>{a["b"].get(o["a"].task.assignetasktouser+"?taskId="+e+"&toUser="+t).then(e=>{n(e.data)}).catch(e=>{r(e)})})},getimageUrl(e){return new Promise((t,n)=>{a["b"].get(o["a"].task.processmap,{params:{instanceId:e},responseType:"blob"}).then(e=>{t(e.data)}).catch(e=>{n(e)})})},signatrueTask(e){return new Promise((t,n)=>{a["b"].post(o["a"].task.signtrueTask,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},submitTask(e){return new Promise((t,n)=>{a["b"].post(o["a"].task.submittaskForm,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},cancleInstaceTask(e,t){let n=o["a"].task.cancleInstacTask+`?instanceId=${e}&resaon=${t}`;return new Promise((e,t)=>{a["b"].post(n).then(t=>{e(t.data)}).catch(e=>{t(e)})})},returnInstaceTask(e){let t=o["a"].task.returnInstaceTask;return new Promise((n,o)=>{a["b"].post(t,e,a["b"].contentType.appJson).then(e=>{n(e.data)}).catch(e=>{o(e)})})},getInstanceActiveTasks(e){return new Promise((t,n)=>{a["b"].get(o["a"].task.getInstanceActiveTasks+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getNotifyTaskCount(e,t=null){return a["b"].get(o["a"].task.getNotifyTaskCount,{params:{userId:e,defIds:t}})},getNotifyTasks(e,t,n){return a["b"].post(o["a"].task.getNotifyTasks,n,{params:{userId:e,defIds:t},...a["b"].contentType.appJson})},readNotifyTask(e,t){return Object(a["b"])({method:"post",url:o["a"].task.readNotifyTask,params:{userId:e,taskId:t}})},getInstaceTaskCount(e,t=""){return a["b"].get(o["a"].task.getinstacetaskCount,{params:{userid:e,defIds:t}}).then(e=>e.data)},getMyDarfPageList(e,t){return new Promise((n,r)=>{const s={...a["b"].contentType.appJson,params:t};a["b"].post(o["a"].iform.getMyDarflistPage,e,s).then(e=>{n(e.data)}).catch(e=>{r(e)})})},submitTaskNotBusinessForm(e){return new Promise((t,n)=>{a["b"].post(o["a"].iform.SubmitProcessFormNotBizData,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getApplyTaskCount(e,t){return a["b"].post(o["a"].task.getApplyTaskCount+`?userId=${e}&defIds=${t}`)},getCompleteTaskCount(e,t){return a["b"].post(o["a"].task.getCompleteTaskCount+`?userId=${e}&defIds=${t}`)}};const r=(e,t)=>Object(a["b"])({url:o["a"].task.urgeTask,method:"post",params:{instanceId:e,userId:t}}),s=e=>Object(a["b"])({url:o["a"].task.taskOverviewMap,method:"get",params:{instanceId:e}}),i=e=>Object(a["b"])({url:o["a"].task.getProcessViewType,method:"get",params:{instanceId:e}}),c=e=>Object(a["b"])({url:o["a"].task.isHaveSingurateTask,method:"get",params:{taskId:e}})},b562:function(e,t,n){"use strict";n.d(t,"b",(function(){return r}));var a=n("e443"),o=n("99b1");function r(e){return a["b"].post(o["a"].app.insertVisitApp,e,a["b"].contentType.appJson)}t["a"]={getMyCollectionAppOnMobile(e,t,n,r=null,s,i){const c={userId:e,roles:t,count:n,appDisplayType:r,labelText:s,excludeLableText:i};return new Promise((e,t)=>{a["b"].get(o["a"].app.getMyCollectionAppOnMobile,{params:c}).then(t=>{e(t.data)}).catch(e=>{t(e)})})},getMyHotApps(e,t,n="app",r){return new Promise((s,i)=>{const c={userId:e,roles:t,display:n,count:r};a["b"].get(o["a"].app.getMyHotApps,{params:c}).then(e=>{s(e.data)}).catch(e=>{i(e)})})},getMyAppsByLabels(e,t){return new Promise((n,r)=>{let s=o["a"].app.getMyAppsByLabels+"?roles="+e+"&labels="+t;a["b"].get(s,null).then(e=>{n(e.data)}).catch(e=>{r(e)})})},getMyAppsOrderByType(e,t,n=null,r,s){return new Promise((i,c)=>{const u={userId:e,roles:t,appDisplayType:n,status:r,lableText:s};a["b"].get(o["a"].app.getMyAppsOrderByType,{params:u}).then(e=>{i(e.data)}).catch(e=>{c(e)})})},cancleApplicationCollection(e){return new Promise((t,n)=>{a["b"].post(o["a"].app.cancelApplication,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},createMyApplication(e){return new Promise((t,n)=>{a["b"].post(o["a"].app.createApplication,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getMenuByRoles(e,t,n,r,s){let i=`${o["a"].app.getRoleMenu}?roles=${e}&module=${t}&children=${n}&isTop=${r}&parentId=${s}`;return new Promise((e,t)=>{a["b"].get(i).then(t=>{e(t.data)}).catch(e=>{t(e)})})},getQueryInfo(e,t){var n=e.lastIndexOf(t);return e=e.substring(n,e.length),e},getUserAppViewAndMenu(e,t,n){let r=`${o["a"].app.getUserAppViewAndMenu}?role=${e}&appid=${t}&userId=${n}`;return new Promise((e,t)=>{a["b"].get(r).then(t=>{e(t.data)}).catch(e=>{t(e)})})},getAppDepts(e){let t=`${o["a"].app.getAppDepts}?id=${e}`;return new Promise((e,n)=>{a["b"].get(t).then(t=>{e(t.data)}).catch(e=>{n(e)})})},getAllApps(){return new Promise((e,t)=>{a["b"].post(o["a"].app.getAllApps,null,a["b"].contentType.textJson).then(t=>{e(t.data)}).catch(e=>{t(e)})})},getAppViewById(e,t){return new Promise((n,r)=>{a["b"].get(o["a"].app.getAppViewById,{params:{id:e,roles:t}}).then(e=>{n(e.data)}).catch(e=>{r(e)})})},saveAppDetail(e){return new Promise((t,n)=>{a["b"].post(o["a"].app.saveAppDetail,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getByResourceCode(e,t=2,n="bpm"){return new Promise((r,s)=>{a["b"].get(o["a"].app.getByResourceCode,{params:{resourceCode:e,resourceType:t,module:n}}).then(e=>{r(e.data)}).catch(e=>{s(e)})})},createPermissions(e){return new Promise((t,n)=>{a["b"].post(o["a"].app.createPermissions,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},deletePermissions(e){return new Promise((t,n)=>{a["b"].post(o["a"].app.deletePermissions,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})}}},bf26:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));n("14d9"),n("d9e2");var a=n("9569"),o=n("3bce"),r=n("6e81"),s=n("7ee8");function i(e){let t=e.code,n={};n[t]=[];let s=Object(o["r"])(e,["combobox","combogrid","combotree","ocbox","datebox"])?"change":"blur";if(e.isRequired&&n[t].push(new u(t,"此字段必填",s,null)),e.extension&&e.extension.validType){let o=null;if(Object.keys(r["a"]).includes(e.extension.validType))o=r["a"][e.extension.validType];else{var i;let t=(null===(i=a["a"].value)||void 0===i?void 0:i.find(t=>t.id===e.extension.validType))||{};o=c(t)}o&&n[t].push(new u(t,null!=o?o.message:"",s,new l(o?o.validator:e.extension.validType,null!=o?o.message:"",e)))}return"filebox"!==e.controlType&&n[t].push(new u(t,"",s,new l(r["a"]["fieldLength"].validator,r["a"]["fieldLength"].message,e))),n[t].length?n:null}function c(e){return Object(s["a"])(e)?null:{name:e.label,validator(t){const n=new RegExp(e.value);return n.test(t)},message:"请输入"+e.label}}function u(e,t,n,a){let o=null;return void 0===e?null:(o=a?{validator:a,trigger:n||"blur"}:{required:!0,message:t||"此字段必填",trigger:n||"blur"},o)}function l(e,t,n){let a=(a,o,r)=>{try{let s=!0;e instanceof Function?s=e(o,a,t,n):e.indexOf("fun_")>-1&&(s=window.eval(e)),"string"===typeof s&&(s||r(),r(new Error(s))),s?r():r(new Error(t||a.message))}catch(s){r(new Error(s.message))}};return a}},c6e4:function(e,t,n){"use strict";n.r(t);var a={install:function(e,t){e.component("iduo-sdk-dialog",()=>n.e("chunk-760023c5").then(n.bind(null,"bf46")))}},o={install:function(e){e.component("dynamic-component",()=>n.e("chunk-2d0be2cd").then(n.bind(null,"2eae")))}},r={install:function(e,t){e.component("editor",()=>Promise.all([n.e("npm.lodash-es~b92ffc84"),n.e("npm.wangeditor~8c321652"),n.e("chunk-52a221de")]).then(n.bind(null,"156b")))}},s={install:function(e,t){e.component("form-check",()=>n.e("chunk-2d209174").then(n.bind(null,"a829")))}},i={install:e=>{e.component("qrcode",()=>n.e("chunk-14e16aea").then(n.bind(null,"7268")))}},c=n("a18c"),u=n("4360"),l=(n("428f"),n("7046"),n("dee4"),n("7f10"),n("a026"));l["default"].component("remote-script",{render:function(e){var t=this;return e("script",{attrs:{type:"text/javascript",src:this.src},on:{load:function(e){t.$emit("load",e)},error:function(e){t.$emit("error",e)},readystatechange:function(e){"complete"===this.readyState&&t.$emit("load",e)}}})},props:{src:{type:String,required:!0}}}),l["default"].component("remote-css",{render:function(e){var t=this;return e("link",{attrs:{rel:"stylesheet",href:this.src},on:{load:function(e){t.$emit("load",e)},error:function(e){t.$emit("error",e)},readystatechange:function(e){"complete"===this.readyState&&t.$emit("load",e)}}})},props:{src:{type:String,required:!0}}});var d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon-preview"},["classic"===e.iconType&&e.name?n("div",{staticClass:"icon-classic duo-icon",style:Object.assign({},{color:e.ftColor,background:e.bgColor},e.iconStyle())},[n("i",{class:"fa "+e.iconName})]):e._e(),"modern"===e.iconType&&e.name?n("svg",{staticClass:"icon-modern duo-icon",style:Object.assign({},{background:e.bgColor},e.iconStyle()),attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":e.iconName}})]):e._e(),"image"===e.iconType?n("img",{staticClass:"duo-icon icon-image",style:e.iconStyle(),attrs:{src:e.iconName,alt:""}}):e._e()])},p=[],f={name:"IconPreview",props:{name:{type:String,default:""},size:{type:[String,Number],default:32}},computed:{iconName(){if(this.name)return this.name.split(",")[0]},ftColor(){return this.name.split(",")[1]},bgColor(){return this.name.split(",")[2]},iconType(){const e=this.iconName;return"#"===(null===e||void 0===e?void 0:e.split("")[0])?"modern":null!==e&&void 0!==e&&e.includes("http")?"image":"classic"},iconSize(){try{return Number(this.size)-20+"px"}catch{return"12px"}},divSize(){try{return Number(this.size)+"px"}catch{return"32px"}}},methods:{iconStyle(){return{width:this.divSize,height:this.divSize,fontSize:this.iconSize}}}},m=f,g=(n("72ba"),n("2877")),h=Object(g["a"])(m,d,p,!1,null,"6e70f964",null),_=h.exports;function b(e,t){return e?`https://at.alicdn.com/t/${e}.${t}`:""}const y=e=>{e.forEach(e=>{const t=b(e,"js"),n=document.createElement("script");n.src=t,document.body.appendChild(n)})},k={install:(e,t)=>{e.component(_.name,_),y(t.aliId)}};var w=n("5a0c"),v=n.n(w),O=n("3dfd"),T=n("12cb"),C=n("365c"),I=n("4328"),P=n.n(I);const S=P.a.parse(location.search,{ignoreQueryPrefix:!0}),E=S.access_token;async function A(){if(!E)return;const e=Date.now()+216e6,t={access_token:E,expires_in:e,expires_at:e,expires_time:e};return C["e"].saveToken(t),C["e"].getUserInfo(t).then(e=>{const t=e.Jobs;Array.isArray(t)&&t.length>0&&(e.Jobs=t[0]),C["e"].signIn(e,!0)})}var D=n("163b");const j=()=>{l["default"].directive("hide-on-dingtalk",{inserted(e){Object(D["i"])()&&(e.style.display="none")}}),l["default"].directive("autofocus",{inserted(e,t){let n=!0;const a=t.arg||"input",o=t.value;if("function"===typeof o&&(n=o()),n)if(e.tagName===a||e.tagName.toLowerCase()===a)null===e||void 0===e||e.focus();else{const t=e.querySelector(a);null===t||void 0===t||t.focus()}}})};var M=n("3d1f"),x=n("8af2");const{seqConfig:B,hosts:U}=window.projectConfig,R=()=>{!0===B.enable&&(window.addEventListener("error",e=>{console.debug(e),Object(x["d"])("Custom",{Level:"Warning",MessageTemplate:e.message,Properties:{stack:e.error.stack,...Object(M["a"])()}})}),window.addEventListener("unhandledrejection",e=>{console.debug(e),Object(x["d"])("Custom",{Level:"Warning",MessageTemplate:e.reason,Properties:{...Object(M["a"])()}})}))};n("e17f");var L=n("2241");const F=["form.onLoad","form.onValidateBefore","form.onValidateAfter","form.onSubmitBefore","form.onSubmitAfter"];function N(){!0===window.projectConfig.globalErrorCatch&&(window.onerror=function(e,t,n,a,o){const r=["Message: "+e,"URL: "+t,"Line: "+n,"Column: "+a,"Error object: "+JSON.stringify(o)].join(" - ");console.error(r);const s=e.toLowerCase();return s.includes("script error")&&$(),!1},l["default"].config.errorHandler=function(e,t,n){console.error(e),console.error(t),console.error(n);const a=F.some(e=>n.includes(e));if(a){const e=n.slice(n.indexOf('"'));$(e)}})}function $(e){!0===window.projectConfig.errTips&&Object(L["a"])({title:"提示",message:`提交脚本${e||""}出错，请联系管理员！`})}var W=n("eab1"),q=n("53d9");n("c73d");function G(e,t=window.self,n){t.addEventListener("message",e,n)}const V=()=>{G(e=>{q["c"].map(({matcher:t,handler:n})=>{t(e)&&n(e)})})};n("615f");var K=n("92e2"),z=(n("6894"),n("e11d")),J=(n("a39e"),n("241e")),H=(n("570a"),n("1d36")),Y=(n("414a"),n("7a82")),X=(n("0500"),n("4feb")),Q=(n("b000"),n("1a23")),Z=(n("4142"),n("39d1")),ee=(n("9cb7"),n("66fd")),te=(n("db2c8"),n("1125")),ne=(n("f06a"),n("20fb")),ae=(n("a909"),n("3acc")),oe=(n("3c32"),n("417e")),re=(n("d1cf"),n("ee83")),se=(n("6d73"),n("473d")),ie=(n("4467"),n("c36e")),ce=(n("6a39"),n("f240")),ue=(n("0cc8"),n("3104")),le=(n("e930"),n("8f80")),de=(n("a44c"),n("e27c")),pe=(n("4ddd"),n("9f14")),fe=(n("52464"),n("6b41")),me=(n("18e9"),n("471a")),ge=(n("342a"),n("1437")),he=(n("be7f"),n("565f")),_e=(n("5d17"),n("f9bd")),be=(n("38d5"),n("772a")),ye=(n("66b9"),n("b650")),ke=(n("2cbd"),n("ab2c")),we=(n("91d5"),n("f0ca")),ve=(n("f1dc"),n("6e47")),Oe=(n("66cf"),n("343b")),Te=(n("a52c"),n("2ed4")),Ce=(n("537a"),n("ac28")),Ie=(n("bda7"),n("5e46")),Pe=(n("ac1e"),n("543e")),Se=(n("c3a6"),n("ad06")),Ee=(n("ab71"),n("58e6")),Ae=(n("4b0a"),n("2bb1")),De=(n("7844"),n("5596")),je=(n("5f5f"),n("f2533")),Me=(n("8a58"),n("e41f")),xe=(n("c194"),n("7744")),Be=(n("0653"),n("34e9")),Ue=(n("5f1a"),n("a3e2")),Re=(n("4056"),n("44bf")),Le=(n("0ec5"),n("21ab")),Fe=(n("3df5"),n("2830")),Ne=(n("da3c"),n("0b33")),$e=(n("2994"),n("2bdd")),We=(n("5852"),n("d961")),qe=(n("81e6"),n("9ffb")),Ge=(n("4d48"),n("d1e1"));const Ve=[L["a"],Ge["a"],qe["a"],We["a"],$e["a"],Ne["a"],Fe["a"],Le["a"],Re["a"],Ue["a"],Be["a"],xe["a"],Me["a"],je["a"],De["a"],Ae["a"],Ee["a"],Se["a"],Pe["a"],Ie["a"],Ce["a"],Te["a"],Oe["a"],ve["a"],we["a"],ke["a"],ye["a"],be["a"],_e["a"],he["a"],ge["a"],me["a"],fe["a"],pe["a"],de["a"],le["a"],ue["a"],ce["a"],ie["a"],se["a"],re["a"],oe["a"],ae["a"],ne["a"],te["a"],ee["a"],Z["a"],Q["a"],X["a"],Y["a"],H["a"],J["a"],z["a"],K["a"]],Ke=()=>{Ve.forEach(e=>{l["default"].use(e)})},ze=(e,t)=>{const n=document.createElement("link");n.href=e+"?t="+Date.now(),n.rel="stylesheet",n.type="text/css",n.onload=()=>{"function"===typeof t&&t()},document.head.appendChild(n)};ze("/static/formStyle.css"),Ke(),l["default"].use(i),l["default"].use(r),l["default"].use(a),l["default"].use(s),l["default"].use(o),l["default"].use(k,{aliId:window.projectConfig.aliId}),l["default"].config.productionTip=!1,l["default"].filter("pointFilter",(function(e,t=2){return e?+Number(e).toFixed(t):""})),l["default"].prototype.$dayjs=v.a,V(),N(),j(),E||Object(W["g"])(c["default"],u["a"]),Object(M["b"])(),R(),A().then(()=>{new l["default"]({el:"#app",router:c["default"],store:u["a"],created(){this.$store.dispatch("setConfigs",window.projectConfig)},i18n:T["a"],render:e=>e(O["a"])})})},c987:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return g}));n("5b81");var a=n("353e"),o=n("a026");const r=o["default"].observable({data:{}}),s={},i={merge:"merge",replace:"replace"},c=(e,t=i.merge)=>{t===i.merge&&(r.data={...r.data,...e}),t===i.replace&&(r.data=e)},u=()=>r.data,l=(e,t)=>{s[e]=t},d={__formulaState:r,__formulaMethods:s,updateFormulaState:c,getFormulaState:u,appendFormulaMethod:l},p="GlobalState",f=e=>({...e,[p]:r.data}),m=(e={})=>({...s,...e}),g=(e,t,n,o)=>{const s=Boolean(e),i=()=>{const t="debugger;",r=e.includes(t),s={functions:m(),debugger:r},i=e.replaceAll(t,"");Object(a["b"])(i,f(n()),s).then(o)},c={deep:!0};s&&i();const u=n=>{var o,r;if(!n||"object"!==typeof n)return;const s=Object(a["a"])(e,n,null===(o=null===(r=t.configuration)||void 0===r||null===(r=r.extension)||void 0===r?void 0:r.strictFindFormulaDep)||void 0===o||o);s.forEach(e=>{t.$watch(()=>n[e],i,c)})},l=()=>{e.includes(p)&&t.$watch(()=>r.data,i,c)},d=e=>{const n=Object.keys(e).filter(t=>Array.isArray(e[t]));n.forEach(n=>{t.$watch(()=>e[n],i,c)})};return{hasFormula:s,initWatcher:u,initGridStateWatcher:d,initGlobalStateWatcher:l}}},cd12:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("e443"),o=n("99b1");const r=e=>Object(a["b"])({url:o["a"].orginzation.getTree,method:"post",data:e})},d3be:function(e,t,n){"use strict";n.d(t,"k",(function(){return i})),n.d(t,"o",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return m})),n.d(t,"b",(function(){return g})),n.d(t,"m",(function(){return h})),n.d(t,"l",(function(){return _})),n.d(t,"c",(function(){return b})),n.d(t,"p",(function(){return y})),n.d(t,"n",(function(){return k})),n.d(t,"g",(function(){return w}));var a=n("e443"),o=n("d702"),r=n("99b1");let s=!0;function i(e,t){return Object(a["b"])({url:r["a"].iform.getDataTable,method:"post",headers:{"Content-Type":void 0===t?"application/json; charset=utf-8":"application/json"},data:t,params:{...e}})}function c(e,t){return Object(a["b"])({url:r["a"].iform.updateAttachmentSourceId,method:"post",params:{sourceId:e,newSourceId:t}})}function u(e){return Object(a["b"])({url:r["a"].iform.addComment,method:"post",data:e,headers:{"Content-Type":"application/json"}})}function l(e){return Object(a["b"])({url:r["a"].iform.cancelComment,method:"post",data:e,headers:{"Content-Type":"application/json"}})}function d(e){return Object(a["b"])({url:r["a"].iform.comments,method:"get",params:e,headers:{"Content-Type":"application/json"}})}function p(e){return Object(a["b"])({url:r["a"].iform.downLoadTemp,method:"post",params:{processDefId:e}})}function f(e,t,n,o){return Object(a["b"])({responseType:"blob",url:r["a"].iform.downloadFormByWord,method:"post",params:{instanceId:e,tempName:t,shardingRuleDate:n,downloadFile:o}})}function m(e,t,n,o){return Object(a["b"])({responseType:"blob",url:r["a"].iform.downloadListByWord,method:"post",params:{formId:e,bizId:t,tempName:n,downloadFile:o}})}function g(e,t){return Object(a["b"])({url:r["a"].iform.addSignature,method:"post",params:{userId:e,path:t}})}function h(){return Object(a["b"])({url:r["a"].iform.getSignatures,method:"get"})}function _(){return Object(a["b"])({url:r["a"].iform.getMyLatestSignature,method:"get"})}function b(e){return Object(a["b"])({url:r["a"].iform.addSysFormSnapshot,method:"post",data:e,headers:{"Content-Type":"application/json"}})}function y(e){return Object(a["b"])({url:r["a"].iform.updateSysFormSnapshot,method:"post",data:e,headers:{"Content-Type":"application/json"}})}function k(e){return Object(a["b"])({url:r["a"].iform.getSysFormSnapshotByTask,method:"get",params:{taskId:e}})}function w(e){return Object(a["b"])({url:r["a"].iform.deleteSysFormSnapshots,method:"post",params:{ids:e}})}t["f"]={writeLog(e=""){return a["b"].post(r["a"].iform.writeLog,{message:e})},getFormInfo(e,t,n){return new Promise((o,s)=>{let i=r["a"].iform.getFormInfo+"?formId="+e+"&bizId="+t;a["b"].post(i,n,a["b"].contentType.appJson).then(e=>{o(e.data)}).catch(e=>{s(e)})})},getListFormInfo(e,t){return new Promise((n,o)=>{let s=r["a"].iform.getListFormInfo+e;a["b"].post(s,t,a["b"].contentType.appJson).then(e=>{n(e.data)}).catch(e=>{o(e)})})},submitProcessForm(e){return new Promise((t,n)=>{!1!==s&&(a["b"].post(r["a"].iform.submitProcessForm,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)}).finally(()=>{s=!0}),s=!1)})},submitBusinessForm(e){return console.debug("emitSubmit: --\x3e submitBusinessForm"),new Promise((t,n)=>{!1!==s&&(a["b"].post(r["a"].iform.submitBusinessForm,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)}).finally(()=>{s=!0}),s=!1)})},getSiginList(e){return new Promise((t,n)=>{let o=r["a"].iform.getSiginList+"?instanceId="+e;a["b"].get(o).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getListBizData(e,t){return new Promise((n,o)=>{a["b"].post(r["a"].iform.getListBizData+e,t,a["b"].contentType.appJson).then(e=>{n(e.data)}).catch(e=>{o(e)})})},getListBizDataOrConfigAddress(e,t,n){return new Promise((o,r)=>{a["b"].post(n,t,{params:{formId:e},...a["b"].contentType.appJson}).then(e=>{o(e.data)}).catch(e=>{r(e)})})},getPublishProcessDefinitionByName(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.getPublishProcessDefinitionByName+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getProcessFormInfo(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.getProcessFormInfo+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getProcessFormData(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.GetProcessFormData+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getFormResource(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.getFormResource+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getResourceBySqlKey(e,t,n,s={}){return new Promise((i,c)=>{let u=r["a"].iform.getResourceBySqlKey+Object(o["c"])(e)+(t?"&searchKey="+t:"")+(n?"&pageIndex="+n:"");a["b"].get(u,s).then(e=>{i(e.data)}).catch(e=>{c(e)})})},getResourcePageBySqlKey(e,t,n){return new Promise((s,i)=>{let c=r["a"].iform.getResourcePageBySqlKey+Object(o["c"])(e)+(t?"&searchKey="+t:"")+(n?"&pageIndex="+n:"");a["b"].get(c).then(e=>{s(e.data)}).catch(e=>{i(e)})})},getSqlConfig(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.getSqlConfig+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getAttachment(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.getAttachment,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},deleteFile(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.deleteFile,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getSerialNo(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.getSerialNo,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getUploadFileUrl(){return r["a"].iform.uploadFile},getUploadHost(){return r["a"].iform.uploadHost},getUploadPath(){return r["a"].uploadPath},GetFileBytePath(){return r["a"].iform.GetFileByte},getProcessStepByVersion(e,t){return new Promise((n,o)=>{let s=r["a"].iform.getProcessStepByVersion+"?processName="+e+"&version="+t;a["b"].post(s,null,a["b"].contentType.appJson).then(e=>{n(e.data)}).catch(e=>{o(e)})})},getSigntureTaskListByTaskId(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.getSigntureTaskListByTaskId+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},takeBackSignatureTask(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.takeBackSignatureTask,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},createSysSininInfo(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.createSysSininInfo,e,a["b"].contentType.appJson).then(e=>{t(e.data)}).catch(e=>{n(e)})})},saveUploadFile(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.saveUploadFile,e,a["b"].contentType.appJson).then(e=>t(e.data)).catch(e=>n(e))})},createDraft(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.createDraft,e,a["b"].contentType.appJson).then(e=>t(e.data)).catch(e=>n(e))})},updateDraft(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.updateDraft,e,a["b"].contentType.appJson).then(e=>t(e.data)).catch(e=>n(e))})},deleteDraft(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.deleteDraft+e,null,a["b"].contentType.appJson).then(e=>t(e.data)).catch(e=>n(e))})},getDraftById(e){return new Promise((t,n)=>{a["b"].post(r["a"].iform.getDraftById+e,null,a["b"].contentType.appJson).then(e=>t(e.data)).catch(e=>n(e))})},getProcessFormInfoByStepId(e,t){return new Promise((n,o)=>{let s=`?processId=${e}&stepId=${t}`;a["b"].get(r["a"].iform.getProcessFormInfoByStepId+s).then(e=>n(e.data)).catch(e=>o(e))})},GetFileByte(e){return new Promise((t,n)=>{var o=Object.assign({responseType:"blob"},a["b"].contentType.appJson);let s=`${r["a"].iform.GetFileByte}?id=${e}&jsType=3`;a["b"].post(s,null,o).then(e=>t(e.data)).catch(e=>n(e))})},getDictionaryById(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.getDictionaryById+"?id="+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})},getDictionaryByGroup(e){return new Promise((t,n)=>{a["b"].get(r["a"].iform.getDictionaryByGroup+"?group="+e).then(e=>{t(e.data)}).catch(e=>{n(e)})})}}},d702:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s}));n("b7ef");function a(e){if(e=String(e),e.length<9)return e;const t=["-","[","]","(",")","_","$","%"],n=e.slice(0,e.length-9),a=e.slice(e.length-9);let o=n;if(n.length>0){const e=Math.floor(Math.random()*(n.length+1)),a=t[Math.floor(Math.random()*t.length)];o=n.slice(0,e)+a+n.slice(e)}const r="IDUO"+a;return o+r}function o(e){return window.btoa(window.unescape(encodeURIComponent(e)))}function r(e){const{enableDataSourceEncryption:t}=window.projectConfig,n=window.btoa(window.unescape(encodeURIComponent(e)));return t?a(n):n}function s(e){return decodeURIComponent(escape(atob(e)))}},dca2:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return u}));n("14d9");const a={};function o(e){a.sapp_id=e.sapp_id,a.sapp_name=e.sapp_name,r(t=>{t.push({action:"aplus.setMetaInfo",arguments:["aplus-rhost-v",e["aplus-rhost-v"]]}),t.push({action:"aplus.setMetaInfo",arguments:["aplus-rhost-g",e["aplus-rhost-g"]]});var n=navigator.userAgent,a=n.indexOf("Android")>-1,o=!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);t.push({action:"aplus.setMetaInfo",arguments:["appId",a?"28302650":o?"28328447":"47130293"]})})}function r(e){(function(e,t,n,a,o){e[a]=e[a]||[];var r=t.getElementsByTagName(n)[0],s=t.createElement(n);s.async=!0,s.id="beacon-aplus",s.src="https://alidt.alicdn.com/alilog/mlog/aplus_mini_cloud.js",r.parentNode.insertBefore(s,r)})(window,document,"script","aplus_queue"),e(window.aplus_queue)}function s(e,t="iduo-form-mobile"){aplus_queue.push({action:"aplus.setMetaInfo",arguments:["_hold","BLOCK"]}),aplus_queue.push({action:"aplus.setMetaInfo",arguments:["_user_id",e]}),aplus_queue.push({action:"aplus.setMetaInfo",arguments:["_dev_id",t]}),aplus_queue.push({action:"aplus.setMetaInfo",arguments:["_hold","START"]})}function i(e,t="iduo-form-mobile"){try{s(e,t)}catch(n){console.error("pushUserSafe",n)}}function c(e,t,n=location.href){aplus_queue.push({action:"aplus.setMetaInfo",arguments:["aplus-waiting","MAN"]}),aplus_queue.push({action:"aplus.sendPV",arguments:[{is_auto:!1},{sapp_id:a.sapp_id,sapp_name:a.sapp_name,page_id:e,page_name:t,page_url:n}]})}function u(e,t,n=location.href){try{c(e,t,n)}catch(a){console.error("pushPageSafe",a)}}},dee4:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));n("14d9");var a=n("12cb"),o=n("5a0c"),r=n.n(o);Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},t["a"]={notify(e){e.code<=1?this.$notify({message:e.message,type:0===e.code?"warning":"success"}):this.$notify.error({message:e.message,duration:0})},message(e){e.code<=1?this.$message({message:e.message,type:0===e.code?"warning":"success"}):this.$message({message:e.message,type:"error"})},info(e){this.$message({message:e,type:"info"})},warning(e){this.$message({message:e,type:"warning"})},getUrlVars(){for(var e,t=[],n=window.location.href,a=n.slice(n.indexOf("?")+1).split("&"),o=0;o<a.length;o++)e=a[o].split("="),t.push(e[0]),t[e[0]]=e[1];return t},getUrlVar:function(e){var t=this.getUrlVars()[e];return void 0===t?"":t},formatMiniDate(e){if(e){if(-1===e.indexOf("Date")){if(e.indexOf(".")>-1){let t=e.split(".");t.length>=2&&(e=t[0])}let n="",o=new Date,r=o.getFullYear(),s=o.getMonth()+1,i=o.getDate(),c=o.getHours(),u=o.getMinutes();var t=new Date(e.replace(/-/g,"/").replace("T"," "));let l=t.getFullYear(),d=t.getMonth()+1,p=t.getDate(),f=t.getHours(),m=t.getMinutes();return n=l<r?l+"/"+d+"/"+p+" "+f+":"+m:d<s?d+"月"+p+"日"+f+":"+m:p<i?i-p+a["a"].t("天前"):f<c?c-f+a["a"].t("小时前"):m<u?u-m+a["a"].t("分钟前"):a["a"].t("刚刚"),n}if(e=r()(e).format("YYYY-MM-DD HH:mm:ss"),-1!==e.indexOf("1-01-01"))return""}return""},randomString(e){let t=this.getUUid(),n="",a=t.length;for(let o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*a));return n},getUUid(e,t){e=e?e.toLowerCase():"n",t=!t||isNaN(t)?32:t,(t>32||0===t)&&(t=32),t<-32&&(t=-32);for(var n="",a=1;a<=32;a++)n+=Math.floor(16*Math.random()).toString(16),8!==a&&12!==a&&16!==a&&20!==a||(n+="-");switch(e){case"n":n=n.replace(/-/g,"");break;case"b":n="{"+n+"}";break;case"p":n="("+n+")";break;case"d":default:break}return n.substr(0,t)},deepCopy(){},getplatForm(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"===e.match(/MicroMessenger/i)||"_sq_"===e.match(/_SQ_/i)?"Weixin":e.indexOf("dingtalk")>-1?"DingTalk":"mobile"},parseTime(e,t){const n=t||"{y}-{m}-{d} {h}:{i}:{s}",a=new Date(e),o={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},r=n.replace(/{(y|m|d|h|i|s|a)+}/g,(e,t)=>{let n=o[t];return"a"===t?["一","二","三","四","五","六","日"][n-1]:(e.length>0&&n<10&&(n="0"+n),n||0)});return r}};const s=e=>new Function("value","index","row",e)},e1b8:function(e,t,n){"use strict";var a=n("e443"),o=n("4360"),r=n("d702"),s=n("99b1");const i=window.projectConfig;t["a"]={getTokenByCode(e){return new Promise((t,n)=>{a["b"].post(i.authGetTokenUrl,e,a["b"].oauth.client(i.oauth)).then(e=>{t(e.data)}).catch(e=>{console.error("根据授权码获取Token出错"),n(e)})})},getTokenByIduoToken(e){if(e){const t=JSON.parse(Object(r["a"])(e));console.log("getTokenByIduoToken-res",t);const n={token:{access_token:t.access_token,expires_in:t.expires_in,expires_at:t.expires_at,refresh_token:t.refresh_token,token_type:t.token_type},userInfo:{Domain:t.Domain,UserEmail:t.UserEmail,UserExtends:t.UserExtends,UserId:t.UserId,UserLoginName:t.UserLoginName,UserName:t.UserName,UserPhone:t.UserPhone,UserRoleIds:t.UserRoleIds,UserRoles:t.UserRoles}};return n}},getUserInfo(e){return new Promise((t,n)=>{var o=e?{headers:a["b"].oauth.accessToken(e)}:null;a["b"].post(i.authGetUserInfoUrl,{},o).then(e=>{e.data.Error?n(e):t(e.data)}).catch(e=>{console.error("请求用户信息接口时出错"),n(e)})})},refreshToken(e){var t={grant_type:"refresh_token",refresh_token:e.refresh_token};return new Promise((e,n)=>{a["b"].post(i.authGetTokenUrl,t,a["b"].oauth.client(i.oauth)).then(t=>{e(t.data)}).catch(e=>{console.error("根据授权码获取Token出错"),n(e)})})},getToken(){const e=o["a"].state.token;if(e){const t=JSON.parse(Object(r["a"])(e));return t}{const e=localStorage.getItem("iduo.token");if(e){const t=JSON.parse(Object(r["a"])(e));return this.saveToken(t),t}console.log("oidcStore/authenticateOidc on token is empty in localStorage ")}},saveToken(e){var t=JSON.stringify(e),n=Object(r["b"])(t);localStorage.setItem("iduo.token",n),o["a"].dispatch("setToken",n)},getMenus(e){let t=o["a"].state.configs.module;return console.log("根据module、roles获取权限集合：",t,e),new Promise((n,o)=>{let r=e.UserRoles.Id,i=r.length>0?r.join(","):"",c=`${s["a"].menu.getByRoles}?module=${t}&roles=${i}`;a["b"].get(c).then(e=>{n(e.data)}).catch(e=>{o(e)})})},signIn(e,t){o["a"].dispatch("setUserInfo",e)},signOut(){o["a"].dispatch("signOut"),localStorage.clear(),console.log("正在请求auth服务器退出登录..."),window.location.reload()}}},e443:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));n("e17f");var a=n("2241"),o=(n("88a7"),n("271a"),n("5494"),n("f253")),r=n("e1b8"),s=(n("14d9"),n("8af2")),i=n("5a0c"),c=n.n(i);const u=e=>{e=e||300;const t=[],n=e=>{t.push(e)},a=new WeakMap,o=e=>{e.state.finished=!0,e.state.endTime=c()().valueOf(),e.state.endTimeText=c()().format("YYYY-MM-DD HH:mm:ss"),r(e.timer)},r=e=>{window.clearInterval(e)},i=(n,o=e)=>{const i={_key:n,traceId:Object(s["a"])(),state:{finished:!1,startTime:c()().valueOf(),startTimeText:c()().format("YYYY-MM-DD HH:mm:ss"),endTime:null,endTimeText:null},timer:null},u=[],l=e=>{e.forEach((e,n)=>{const a=()=>t.splice(n,1),o=()=>window.clearInterval(i.timer);"function"===typeof e&&e(i,a,o)})};return i.timer=window.setInterval(()=>{l(t),l(u)},o),a.set(n,i),{http:i,onCheck:e=>{u.push(e)},cancelCheck(){r(i.timer)}}},u=e=>a.get(e);return{httpMap:a,set:i,get:u,onFinished:o,cancelCheck:r,onCheck:n}};var l=n("eab1"),d=n("a4a0"),p=n("4360"),f=n("ade3"),m=n("5364"),g=(n("d9e2"),new WeakMap);class h{constructor(e,t){Object(f["a"])(this,"options",{}),Object(f["a"])(this,"settings",{}),Object(f["a"])(this,"isRefreshing",!1),g.set(this,{writable:!0,value:[]}),this.options=t,this.settings=e}addQueue(e){return new Promise(t=>{Object(m["a"])(this,g).push(()=>t(e()))})}async refreshToken(e={}){const{task:t=(async()=>{})}=e;if(this.isRefreshing)return this.addQueue(t);this.isRefreshing=!0;const n=await this.options.authenticateOidcSilent().catch(()=>{throw this.options.onError("刷新 Token 失败"),new Error("刷新 Token 失败")}).finally(()=>this.isRefreshing=!1);this.options.onSuccess(n);while(Object(m["a"])(this,g).length>0){const e=Object(m["a"])(this,g).pop();if(!e)return;e()}return t()}}const{oidcSettings:_}=window.projectConfig,b=new h(_,{async authenticateOidcSilent(){return p["a"].dispatch("oidcStore/authenticateOidcSilent")},async onError(e){console.log("refreshToken Error:",e),await p["a"].dispatch("oidcStore/authenticateOidc")},onSuccess(e){},userSettingGetter(){return r["a"].getToken()||{}}});var y=n("3d1f"),k=n("d702"),w=n("163b"),v=n("cee4"),O=n("4328"),T=n.n(O),C=n("a026");const{httpCheckConfig:I}=window.projectConfig,{set:P,get:S,onFinished:E,cancelCheck:A,onCheck:D}=u(null===I||void 0===I?void 0:I.checkIntervalTimeout),j=(null===I||void 0===I?void 0:I.checkTimeoutScope)||[5e3,7e3,1e4,15e3];j.forEach(e=>{null!==I&&void 0!==I&&I.enableTimeoutCheck&&D((t,n,a)=>{const{state:o,traceId:r,_key:i}=t;if(o.finished)a();else{const t=Date.now()-o.startTime;var c;if(t>e)Object(s["d"])("Custom",{Level:"Warning",MessageTemplate:`${null===(c=i.url)||void 0===c?void 0:c.split("?")[0]} 响应时间超过了 ${e} ms`,Properties:{id:r,requestConfig:i,state:o,...Object(y["a"])()}}),n()}})});let M=v["a"].create({baseURL:o["c"],timeout:3e4});const x=e=>M.create(e);M.defaults.transformRequest=[function(e,t){return"application/json"===t["Content-Type"]?JSON.stringify(e):"text/json"===t["Content-Type"]?T.a.stringify(e):"multipart/form-data"===t["Content-Type"]?e:t["Authorization"]?T.a.stringify(e):e}],M.defaults.validateStatus=function(e){return!0},M.interceptors.request.use((function(e){const{onCheck:t,cancelCheck:n}=P(e);let a=r["a"].getToken();return e.headers=Object.assign({},{"Content-Type":"application/x-www-form-urlencoded"},e.headers),a&&!e.NotAuth&&(e.headers=Object.assign(e.headers,M.oauth.accessToken(a))),e})),M.interceptors.response.use((function(e){const t=S(e.config);E(t);let n=e.data,a=e.status,o=e.config.url,r=p["a"].getters.userInfo;try{const{pathname:t,searchParams:n}=new URL(e.config.url),a=n.get("appid");a&&Object(w["u"])(t,{appId:a,userName:r.UserName,userAccount:r.UserAccount})}catch(s){console.log("error")}if(n&&n.code,200===a){if("object"===typeof n&&"code"in n&&"message"in n&&"data"in n&&1!==n.code&&0!==n.code){const{code:e,message:t}=n,a=`${o} 后端接口 ${e} 异常: ${t}`;B(a)}return Promise.resolve(e)}{if(401===a){if(l["b"].value===l["a"].classic)return console.log("refreshToken",e),b.refreshToken({task:()=>(console.log("refreshToken On API 401"),M(e.config))});[l["a"].dingTalk,l["a"].dingTalk_captive].includes(l["b"].value)&&Object(d["a"])(void 0,{refresh:!0})}const t=`${o} 后端接口 ${a} 异常: ${e.statusText}`;return B(t),Promise.reject(e)}}));const B=e=>{!0===window.projectConfig.errTips&&Object(a["a"])({message:e})};let U=["get","post","put","delete"],R={};U.forEach(e=>{R[e]=function(t,n,a){return new Promise((function(o,r){M[e](t,n,a).then(e=>{o(e.data,e)}).catch(e=>{r(e.data,e)})}))}});let L={contentType:{textJson:{headers:{"Content-Type":"text/json"}},appJson:{headers:{"Content-Type":"application/json"}},formData:{headers:{"Content-Type":"multipart/form-data"}},bpmJson:{headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded"}}},oauth:{client(e){return{headers:{Authorization:"Basic "+Object(k["b"])(e.client_id+":"+e.client_secret)}}},accessToken(e){return{Authorization:"Bearer "+e.access_token}}}};Object.assign(M,L),Object.assign(R,L),C["default"].prototype.$axios=R,C["default"].prototype.$api=R;t["b"]=M},eab1:function(e,t,n){"use strict";n.d(t,"d",(function(){return U})),n.d(t,"c",(function(){return R})),n.d(t,"a",(function(){return L})),n.d(t,"b",(function(){return F})),n.d(t,"g",(function(){return $})),n.d(t,"e",(function(){return W})),n.d(t,"f",(function(){return q}));n("88a7"),n("271a"),n("5494"),n("e7e5"),n("d399");var a=n("dca2"),o=n("f358");const r=[{path:"/oidc-callback",name:"oidcCallback",component:()=>n.e("chunk-2d0ba197").then(n.bind(null,"3686"))},{path:"/oidc-popup-callback",name:"oidcPopupCallback",component:()=>n.e("chunk-2d0a34e9").then(n.bind(null,"022c"))},{path:"/oidc-callback-error",name:"oidcCallbackError",component:()=>n.e("chunk-2d0cc412").then(n.bind(null,"4cc0")),meta:{hidden:!0,isPublic:!0}}],{oidcSettings:s}=window.projectConfig,i={namespaced:!0,dispatchEventsOnWindow:!0},c={userLoaded:e=>{console.log("OIDC user is loaded",e),Object(a["c"])(e.profile.UserAccount)},userUnloaded:()=>console.log("OIDC user is unloaded"),accessTokenExpiring:()=>console.log("Access token will expire"),accessTokenExpired:()=>console.log("Access token did expire"),silentRenewError:()=>console.log("OIDC user is unloaded"),userSignedOut:()=>{console.log("OIDC user is signed out")},oidcError:e=>console.log(`An error occured at ${null===e||void 0===e?void 0:e.context}:`,null===e||void 0===e?void 0:e.error)},u=Object(o["b"])(s,i,c),l="oidcStore",d=(e,t)=>{r.forEach(t=>e.addRoute(t)),t.registerModule(l,u),p(e),e.beforeEach(Object(o["a"])(t,l))},p=(e,t=[])=>{e.beforeEach((e,n,a)=>{t=[...t,"/oidc-callback","/oidc-popup-callback","/oidc-callback-error"];const o=t.some(t=>"string"===typeof t?e.path.includes(t):"function"===typeof t?t(e,n):t instanceof RegExp&&e.path.search(t));o||sessionStorage.setItem("latestRoutePath",e.path),a()})};n("163b");var f=n("2c28"),m=n("a026"),g=n("cee4");const{oidcSettings:h,commonOauth2Settings:_}=window.projectConfig,b=g["a"].create({baseURL:h.authority,headers:{"Content-Type":"application/json"}}),y=e=>{const t=new URLSearchParams;return t.append("grant_type","commonoauth2_code"),t.append("client_id",h.client_id),t.append("client_secret",h.client_secret),t.append("code",e),t.append("redirect_uri",location.origin),b({url:"/connect/token",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})},k=e=>(console.log("connectUserInfo",e),b({url:"/connect/userinfo",method:"POST",headers:{Authorization:"Bearer "+e}})),w=async e=>{const t=await y(e),n=await k(t.data.access_token);return t.data.profile=n.data,t.data},v=async e=>{var t;e=null!==(t=e)&&void 0!==t?t:_.client_id;const n=R();if(console.log("getAndUpdateUserOfCommonOauth2: 缓存的user",n),n&&n.expires_at>Date.now())return n;{const t=new URL(location.toString()).searchParams.get("code");if(t){const e=await w(t);return console.log("getAndUpdateUserOfCommonOauth2: 新的user",e),e.expires_at=Date.now()+1e3*e.expires_in,U.value=e,window.history.replaceState({},document.title,window.location.pathname),W(e),e}{const t=encodeURIComponent(location.href),n="mail profile roles openid",a=_.authority+`?client_id=${e}&redirect_uri=${t}&response_type=code&scope=${n}&state=STATE`;window.location.href=a}}},O=e=>{e.beforeEach(async(e,t,n)=>{!0!==e.meta.isPublic?(console.log("setupCommonOauth2Oidc:`to.meta.isPublic !== true`"),await v(),n()):n()})},{oidcSettings:T,comWeChatSettings:C}=window.projectConfig,I=g["a"].create({baseURL:T.authority,headers:{"Content-Type":"application/json"}}),P="https://open.weixin.qq.com/connect/oauth2/authorize",S=e=>{const t=new URLSearchParams;return t.append("grant_type","comwechat_code"),t.append("client_id",T.client_id),t.append("client_secret",T.client_secret),t.append("code",e),I({url:"/connect/token",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})},E=e=>(console.log("connectUserInfo",e),I({url:"/connect/userinfo",method:"POST",headers:{Authorization:"Bearer "+e}})),A=async e=>{const t=await S(e),n=await E(t.data.access_token);return t.data.profile=n.data,t.data},D=async e=>{var t;e=null!==(t=e)&&void 0!==t?t:C.appid;const n=R();if(console.log("getAndUpdateUserOfComWeChat: 缓存的user",n),n&&n.expires_at>Date.now())return n;{const t=new URL(location.toString()).searchParams.get("code");if(t){const e=await A(t);return console.log("getAndUpdateUserOfComWeChat: 新的user",e),e.expires_at=Date.now()+1e3*e.expires_in,U.value=e,window.history.replaceState({},document.title,window.location.pathname),W(e),e}{const t=encodeURIComponent(location.href),n=C.agentid,a=C.scope||"snsapi_privateinfo",o=P+`?appid=${e}&redirect_uri=${t}&response_type=code&scope=${a}&state=STATE&agentid=${n}#wechat_redirect`;window.location.href=o}}},j=e=>{e.beforeEach(async(e,t,n)=>{!0!==e.meta.isPublic?(console.log("setupComWeChatOidc:`to.meta.isPublic !== true`"),await D(),n()):n()})};var M=n("a4a0"),x=n("365c");const{authChannel:B}=window.projectConfig,U=Object(f["useStorage"])("oidcUser1",null,localStorage,{serializer:f["StorageSerializers"].object}),R=()=>U.value,L={classic:"oidc",dingTalk:"dingTalk",dingTalk_captive:"dingTalk_captive",comWeChat:"comWeChat",commonOauth2:"commonOauth2",dingTalkQRCode:"dingTalkQRCode",commonCas:"commonCas"},F=(Object.values(L),Object(m["ref"])(L.classic)),N=()=>{const e=new URL(location.toString()).searchParams,t=e.get("code"),n=e.get("state"),a=e.get("authChannel");F.value=t&&n&&a?a:B||L.classic,console.log("authChannel",F.value)},$=(e,t)=>{N(),W(U.value),F.value===L.classic&&d(e,t),F.value===L.dingTalk&&Object(M["b"])(e),F.value===L.dingTalk_captive&&Object(M["b"])(e),F.value===L.comWeChat&&j(e),F.value===L.commonOauth2&&O(e)},W=(e,t=!0)=>{e&&(x["e"].saveToken(e),x["e"].signIn(e.profile,!0),t&&G())},q=Object(m["ref"])(!0);window.rootFlag=q;const G=()=>{console.log("reloadRoot"),q.value=!1,Object(m["nextTick"])(()=>{q.value=!0})}},edd4:function(e){e.exports=JSON.parse('{"工作":"work","我的申请":"apply","我的待办":"backlog","立即处理":"immediately","我的已办":"Done","我的知会":"Inform","设置":"setting","重新登录":"log in again","费用报销":"Expense Reimbursement","热点聚集":"Hotspot","通知公告":"Notice","师生服务":"Service","就业服务":"Work","请输入搜索关键字":"Please enter search keywords","流程图":"flow chart","我的应用":"My App","全部":"All applications","语言":"Language","首页":"Home","工作台":"Workbench","应用":"App","请输入搜索关键词":"Please input key words","我要查":"Query","我要办":"Handle","我要看":"Watch","更多":"more","没有更多了":"No more","已发起":"Initiated","待处理":"Pending","已处理":"Process","抄送我":"CC me","抄送我的":"CC me","草稿箱":"Drafts","我的草稿":"Drafts","取消申请":"Cancel Application","取消":"Cancel","确定":"Determine","此字段必填":"This field is required","待发起":"To be initiated","表单验证失败,请检查表单!":"Form validation failed, please check the form","请您检查表单，有未填写内容!":"Form validation failed, please check the form","提醒":"Warn","确认提交吗":"Are you sure to submit?","请选择":"Please select","原因":"Reason","取消申请的原因":"Reason for Cancellation of Application","数据选择":"Data Selection","确认":"Determine","提交成功":"Submitted successfully","流程监控":"Process monitoring","当前步骤":"Current step","进行中":"In progress","已完成":"Completed","已取消":"Cancelled","已停滞":"Stalled","重新发起":"Restart"}')},f253:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return f}));const{hosts:a}=window.projectConfig,o=a.gateway+"/engine",r=a.gateway+"/ids4api",s=a.gateway+"/app",i=a.gateway+"/form",c=(a.gateway,a.gateway+"/report"),u=a.gateway+"/mobile",l=a.gateway+"/performance",d=a.gateway+"/ai";function p(e){return a.gateway+"/noauth/"+e}const f=p("ids4api")}}]);